/*
 * Copyright 2015, Multiple autors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * For more information about the used libraries, licenses, 
 * authors and contributors see:
 * https://github.com/Marvin-Brouwer/QR-Redirect#credits
 *
 */!function(){!function(Z,P){function a(a,b){this.count=a,this.dataCodewords=b,this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("DataCodewords",function(){return this.dataCodewords})}function b(c,a,b){this.ecCodewordsPerBlock=c,b?this.ecBlocks=new Array(a,b):this.ecBlocks=new Array(a),this.__defineGetter__("ECCodewordsPerBlock",function(){return this.ecCodewordsPerBlock}),this.__defineGetter__("TotalECCodewords",function(){return this.ecCodewordsPerBlock*this.NumBlocks}),this.__defineGetter__("NumBlocks",function(){for(var b=0,a=0;a<this.ecBlocks.length;a++)b+=this.ecBlocks[a].length;return b}),this.getECBlocks=function(){return this.ecBlocks}}function c(g,f,a,i,j,k){this.versionNumber=g,this.alignmentPatternCenters=f,this.ecBlocks=new Array(a,i,j,k);for(var d=0,h=a.ECCodewordsPerBlock,e=a.getECBlocks(),b=0;b<e.length;b++){var c=e[b];d+=c.Count*(c.DataCodewords+h)}this.totalCodewords=d,this.__defineGetter__("VersionNumber",function(){return this.versionNumber}),this.__defineGetter__("AlignmentPatternCenters",function(){return this.alignmentPatternCenters}),this.__defineGetter__("TotalCodewords",function(){return this.totalCodewords}),this.__defineGetter__("DimensionForVersion",function(){return 17+4*this.versionNumber}),this.buildFunctionPattern=function(){var b=this.DimensionForVersion,a=new L(b);a.setRegion(0,0,9,9),a.setRegion(b-8,0,8,9),a.setRegion(0,b-8,9,8);for(var e=this.alignmentPatternCenters.length,d=0;e>d;d++)for(var f=this.alignmentPatternCenters[d]-2,c=0;e>c;c++)0==d&&(0==c||c==e-1)||d==e-1&&0==c||a.setRegion(this.alignmentPatternCenters[c]-2,f,5,5);return a.setRegion(6,9,1,b-17),a.setRegion(9,6,b-17,1),this.versionNumber>6&&(a.setRegion(b-11,0,3,6),a.setRegion(0,b-11,6,3)),a},this.getECBlocksForLevel=function(a){return this.ecBlocks[a.ordinal()]}}function X(){return new Array(new c(1,new Array,new b(7,new a(1,19)),new b(10,new a(1,16)),new b(13,new a(1,13)),new b(17,new a(1,9))),new c(2,new Array(6,18),new b(10,new a(1,34)),new b(16,new a(1,28)),new b(22,new a(1,22)),new b(28,new a(1,16))),new c(3,new Array(6,22),new b(15,new a(1,55)),new b(26,new a(1,44)),new b(18,new a(2,17)),new b(22,new a(2,13))),new c(4,new Array(6,26),new b(20,new a(1,80)),new b(18,new a(2,32)),new b(26,new a(2,24)),new b(16,new a(4,9))),new c(5,new Array(6,30),new b(26,new a(1,108)),new b(24,new a(2,43)),new b(18,new a(2,15),new a(2,16)),new b(22,new a(2,11),new a(2,12))),new c(6,new Array(6,34),new b(18,new a(2,68)),new b(16,new a(4,27)),new b(24,new a(4,19)),new b(28,new a(4,15))),new c(7,new Array(6,22,38),new b(20,new a(2,78)),new b(18,new a(4,31)),new b(18,new a(2,14),new a(4,15)),new b(26,new a(4,13),new a(1,14))),new c(8,new Array(6,24,42),new b(24,new a(2,97)),new b(22,new a(2,38),new a(2,39)),new b(22,new a(4,18),new a(2,19)),new b(26,new a(4,14),new a(2,15))),new c(9,new Array(6,26,46),new b(30,new a(2,116)),new b(22,new a(3,36),new a(2,37)),new b(20,new a(4,16),new a(4,17)),new b(24,new a(4,12),new a(4,13))),new c(10,new Array(6,28,50),new b(18,new a(2,68),new a(2,69)),new b(26,new a(4,43),new a(1,44)),new b(24,new a(6,19),new a(2,20)),new b(28,new a(6,15),new a(2,16))),new c(11,new Array(6,30,54),new b(20,new a(4,81)),new b(30,new a(1,50),new a(4,51)),new b(28,new a(4,22),new a(4,23)),new b(24,new a(3,12),new a(8,13))),new c(12,new Array(6,32,58),new b(24,new a(2,92),new a(2,93)),new b(22,new a(6,36),new a(2,37)),new b(26,new a(4,20),new a(6,21)),new b(28,new a(7,14),new a(4,15))),new c(13,new Array(6,34,62),new b(26,new a(4,107)),new b(22,new a(8,37),new a(1,38)),new b(24,new a(8,20),new a(4,21)),new b(22,new a(12,11),new a(4,12))),new c(14,new Array(6,26,46,66),new b(30,new a(3,115),new a(1,116)),new b(24,new a(4,40),new a(5,41)),new b(20,new a(11,16),new a(5,17)),new b(24,new a(11,12),new a(5,13))),new c(15,new Array(6,26,48,70),new b(22,new a(5,87),new a(1,88)),new b(24,new a(5,41),new a(5,42)),new b(30,new a(5,24),new a(7,25)),new b(24,new a(11,12),new a(7,13))),new c(16,new Array(6,26,50,74),new b(24,new a(5,98),new a(1,99)),new b(28,new a(7,45),new a(3,46)),new b(24,new a(15,19),new a(2,20)),new b(30,new a(3,15),new a(13,16))),new c(17,new Array(6,30,54,78),new b(28,new a(1,107),new a(5,108)),new b(28,new a(10,46),new a(1,47)),new b(28,new a(1,22),new a(15,23)),new b(28,new a(2,14),new a(17,15))),new c(18,new Array(6,30,56,82),new b(30,new a(5,120),new a(1,121)),new b(26,new a(9,43),new a(4,44)),new b(28,new a(17,22),new a(1,23)),new b(28,new a(2,14),new a(19,15))),new c(19,new Array(6,30,58,86),new b(28,new a(3,113),new a(4,114)),new b(26,new a(3,44),new a(11,45)),new b(26,new a(17,21),new a(4,22)),new b(26,new a(9,13),new a(16,14))),new c(20,new Array(6,34,62,90),new b(28,new a(3,107),new a(5,108)),new b(26,new a(3,41),new a(13,42)),new b(30,new a(15,24),new a(5,25)),new b(28,new a(15,15),new a(10,16))),new c(21,new Array(6,28,50,72,94),new b(28,new a(4,116),new a(4,117)),new b(26,new a(17,42)),new b(28,new a(17,22),new a(6,23)),new b(30,new a(19,16),new a(6,17))),new c(22,new Array(6,26,50,74,98),new b(28,new a(2,111),new a(7,112)),new b(28,new a(17,46)),new b(30,new a(7,24),new a(16,25)),new b(24,new a(34,13))),new c(23,new Array(6,30,54,74,102),new b(30,new a(4,121),new a(5,122)),new b(28,new a(4,47),new a(14,48)),new b(30,new a(11,24),new a(14,25)),new b(30,new a(16,15),new a(14,16))),new c(24,new Array(6,28,54,80,106),new b(30,new a(6,117),new a(4,118)),new b(28,new a(6,45),new a(14,46)),new b(30,new a(11,24),new a(16,25)),new b(30,new a(30,16),new a(2,17))),new c(25,new Array(6,32,58,84,110),new b(26,new a(8,106),new a(4,107)),new b(28,new a(8,47),new a(13,48)),new b(30,new a(7,24),new a(22,25)),new b(30,new a(22,15),new a(13,16))),new c(26,new Array(6,30,58,86,114),new b(28,new a(10,114),new a(2,115)),new b(28,new a(19,46),new a(4,47)),new b(28,new a(28,22),new a(6,23)),new b(30,new a(33,16),new a(4,17))),new c(27,new Array(6,34,62,90,118),new b(30,new a(8,122),new a(4,123)),new b(28,new a(22,45),new a(3,46)),new b(30,new a(8,23),new a(26,24)),new b(30,new a(12,15),new a(28,16))),new c(28,new Array(6,26,50,74,98,122),new b(30,new a(3,117),new a(10,118)),new b(28,new a(3,45),new a(23,46)),new b(30,new a(4,24),new a(31,25)),new b(30,new a(11,15),new a(31,16))),new c(29,new Array(6,30,54,78,102,126),new b(30,new a(7,116),new a(7,117)),new b(28,new a(21,45),new a(7,46)),new b(30,new a(1,23),new a(37,24)),new b(30,new a(19,15),new a(26,16))),new c(30,new Array(6,26,52,78,104,130),new b(30,new a(5,115),new a(10,116)),new b(28,new a(19,47),new a(10,48)),new b(30,new a(15,24),new a(25,25)),new b(30,new a(23,15),new a(25,16))),new c(31,new Array(6,30,56,82,108,134),new b(30,new a(13,115),new a(3,116)),new b(28,new a(2,46),new a(29,47)),new b(30,new a(42,24),new a(1,25)),new b(30,new a(23,15),new a(28,16))),new c(32,new Array(6,34,60,86,112,138),new b(30,new a(17,115)),new b(28,new a(10,46),new a(23,47)),new b(30,new a(10,24),new a(35,25)),new b(30,new a(19,15),new a(35,16))),new c(33,new Array(6,30,58,86,114,142),new b(30,new a(17,115),new a(1,116)),new b(28,new a(14,46),new a(21,47)),new b(30,new a(29,24),new a(19,25)),new b(30,new a(11,15),new a(46,16))),new c(34,new Array(6,34,62,90,118,146),new b(30,new a(13,115),new a(6,116)),new b(28,new a(14,46),new a(23,47)),new b(30,new a(44,24),new a(7,25)),new b(30,new a(59,16),new a(1,17))),new c(35,new Array(6,30,54,78,102,126,150),new b(30,new a(12,121),new a(7,122)),new b(28,new a(12,47),new a(26,48)),new b(30,new a(39,24),new a(14,25)),new b(30,new a(22,15),new a(41,16))),new c(36,new Array(6,24,50,76,102,128,154),new b(30,new a(6,121),new a(14,122)),new b(28,new a(6,47),new a(34,48)),new b(30,new a(46,24),new a(10,25)),new b(30,new a(2,15),new a(64,16))),new c(37,new Array(6,28,54,80,106,132,158),new b(30,new a(17,122),new a(4,123)),new b(28,new a(29,46),new a(14,47)),new b(30,new a(49,24),new a(10,25)),new b(30,new a(24,15),new a(46,16))),new c(38,new Array(6,32,58,84,110,136,162),new b(30,new a(4,122),new a(18,123)),new b(28,new a(13,46),new a(32,47)),new b(30,new a(48,24),new a(14,25)),new b(30,new a(42,15),new a(32,16))),new c(39,new Array(6,26,54,82,110,138,166),new b(30,new a(20,117),new a(4,118)),new b(28,new a(40,47),new a(7,48)),new b(30,new a(43,24),new a(22,25)),new b(30,new a(10,15),new a(67,16))),new c(40,new Array(6,30,58,86,114,142,170),new b(30,new a(19,118),new a(6,119)),new b(28,new a(18,47),new a(31,48)),new b(30,new a(34,24),new a(34,25)),new b(30,new a(20,15),new a(61,16))))}function m(a,b,c,d,e,f,g,h,i){this.a11=a,this.a12=d,this.a13=g,this.a21=b,this.a22=e,this.a23=h,this.a31=c,this.a32=f,this.a33=i,this.transformPoints1=function(b){for(var h=b.length,n=this.a11,m=this.a12,l=this.a13,f=this.a21,g=this.a22,o=this.a23,i=this.a31,j=this.a32,k=this.a33,a=0;h>a;a+=2){var d=b[a],c=b[a+1],e=l*d+o*c+k;b[a]=(n*d+f*c+i)/e,b[a+1]=(m*d+g*c+j)/e}},this.transformPoints2=function(b,e){for(var g=b.length,a=0;g>a;a++){var c=b[a],d=e[a],f=this.a13*c+this.a23*d+this.a33;b[a]=(this.a11*c+this.a21*d+this.a31)/f,e[a]=(this.a12*c+this.a22*d+this.a32)/f}},this.buildAdjoint=function(){return new m(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},this.times=function(a){return new m(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)}}function $(a,b){this.bits=a,this.points=b}function da(a){this.image=a,this.resultPointCallback=null,this.sizeOfBlackWhiteBlackRun=function(a,b,c,d){var h=Math.abs(d-b)>Math.abs(c-a);if(h){var i=a;a=b,b=i,i=c,c=d,d=i}for(var k=Math.abs(c-a),s=Math.abs(d-b),j=-k>>1,r=d>b?1:-1,t=c>a?1:-1,g=0,e=a,f=b;e!=c;e+=t){var o=h?f:e,p=h?e:f;if(1==g?this.image[o+p*qrcode.width]&&g++:this.image[o+p*qrcode.width]||g++,3==g){var q=e-a,n=f-b;return Math.sqrt(q*q+n*n)}if(j+=s,j>0){if(f==d)break;f+=r,j-=k}}var l=c-a,m=d-b;return Math.sqrt(l*l+m*m)},this.sizeOfBlackWhiteBlackRunBothWays=function(a,c,f,g){var h=this.sizeOfBlackWhiteBlackRun(a,c,f,g),d=1,b=a-(f-a);0>b?(d=a/(a-b),b=0):b>=qrcode.width&&(d=(qrcode.width-1-a)/(b-a),b=qrcode.width-1);var e=Math.floor(c-(g-c)*d);return d=1,0>e?(d=c/(c-e),e=0):e>=qrcode.height&&(d=(qrcode.height-1-c)/(e-c),e=qrcode.height-1),b=Math.floor(a+(b-a)*d),h+=this.sizeOfBlackWhiteBlackRun(a,c,b,e),h-1},this.calculateModuleSizeOneWay=function(a,b){var c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.X),Math.floor(a.Y),Math.floor(b.X),Math.floor(b.Y)),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(b.X),Math.floor(b.Y),Math.floor(a.X),Math.floor(a.Y));return isNaN(c)?d/7:isNaN(d)?c/7:(c+d)/14},this.calculateModuleSize=function(a,b,c){return(this.calculateModuleSizeOneWay(a,b)+this.calculateModuleSizeOneWay(a,c))/2},this.distance=function(a,b){return xDiff=a.X-b.X,yDiff=a.Y-b.Y,Math.sqrt(xDiff*xDiff+yDiff*yDiff)},this.computeDimension=function(b,d,e,c){var f=Math.round(this.distance(b,d)/c),g=Math.round(this.distance(b,e)/c),a=(f+g>>1)+7;switch(3&a){case 0:a++;break;case 2:a--;break;case 3:throw"Error"}return a},this.findAlignmentInRegion=function(b,d,e,h){var a=Math.floor(h*b),c=Math.max(0,d-a),f=Math.min(qrcode.width-1,d+a);if(3*b>f-c)throw"Error";var g=Math.max(0,e-a),i=Math.min(qrcode.height-1,e+a),j=new ea(this.image,c,g,f-c,i-g,b,this.resultPointCallback);return j.find()},this.createTransform=function(a,d,b,f,j){var e,g,h,i,c=j-3.5;null!=f?(e=f.X,g=f.Y,h=i=c-3):(e=d.X-a.X+b.X,g=d.Y-a.Y+b.Y,h=i=c);var k=m.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,h,i,3.5,c,a.X,a.Y,d.X,d.Y,e,g,b.X,b.Y);return k},this.sampleGrid=function(a,b,c){var d=GridSampler;return d.sampleGrid3(a,c,b)},this.processFinderPatternInfo=function(f){var a=f.TopLeft,d=f.TopRight,b=f.BottomLeft,g=this.calculateModuleSize(a,d,b);if(1>g)throw"Error";var h=this.computeDimension(a,d,b,g),l=c.getProvisionalVersionForDimension(h),p=l.DimensionForVersion-7,e=null;if(l.AlignmentPatternCenters.length>0)for(var s=d.X-a.X+b.X,q=d.Y-a.Y+b.Y,j=1-3/p,n=Math.floor(a.X+j*(s-a.X)),o=Math.floor(a.Y+j*(q-a.Y)),i=4;16>=i;i<<=1){e=this.findAlignmentInRegion(g,n,o,i);break}var k,r=this.createTransform(a,d,b,e,h),m=this.sampleGrid(this.image,r,h);return k=null==e?new Array(b,a,d):new Array(b,a,d,e),new $(m,k)},this.detect=function(){var a=(new ba).findFinderPattern(this.image);return this.processFinderPatternInfo(a)}}function k(a){this.errorCorrectionLevel=t.forBits(a>>3&3),this.dataMask=7&a,this.__defineGetter__("ErrorCorrectionLevel",function(){return this.errorCorrectionLevel}),this.__defineGetter__("DataMask",function(){return this.dataMask}),this.GetHashCode=function(){return this.errorCorrectionLevel.ordinal()<<3|dataMask},this.Equals=function(b){var a=b;return this.errorCorrectionLevel==a.errorCorrectionLevel&&this.dataMask==a.dataMask}}function t(a,b,c){this.ordinal_Renamed_Field=a,this.bits=b,this.name=c,this.__defineGetter__("Bits",function(){return this.bits}),this.__defineGetter__("Name",function(){return this.name}),this.ordinal=function(){return this.ordinal_Renamed_Field}}function L(a,b){if(b||(b=a),1>a||1>b)throw"Both dimensions must be greater than 0";this.width=a,this.height=b;var c=a>>5;0!=(31&a)&&c++,this.rowSize=c,this.bits=new Array(c*b);for(var d=0;d<this.bits.length;d++)this.bits[d]=0;this.__defineGetter__("Width",function(){return this.width}),this.__defineGetter__("Height",function(){return this.height}),this.__defineGetter__("Dimension",function(){if(this.width!=this.height)throw"Can't call getDimension() on a non-square matrix";return this.width}),this.get_Renamed=function(a,b){var c=b*this.rowSize+(a>>5);return 0!=(1&n(this.bits[c],31&a))},this.set_Renamed=function(a,b){var c=b*this.rowSize+(a>>5);this.bits[c]|=1<<(31&a)},this.flip=function(a,b){var c=b*this.rowSize+(a>>5);this.bits[c]^=1<<(31&a)},this.clear=function(){for(var b=this.bits.length,a=0;b>a;a++)this.bits[a]=0},this.setRegion=function(b,c,e,f){if(0>c||0>b)throw"Left and top must be nonnegative";if(1>f||1>e)throw"Height and width must be at least 1";var g=b+e,h=c+f;if(h>this.height||g>this.width)throw"The region must fit inside the matrix";for(var d=c;h>d;d++)for(var i=d*this.rowSize,a=b;g>a;a++)this.bits[i+(a>>5)]|=1<<(31&a)}}function B(a,b){this.numDataCodewords=a,this.codewords=b,this.__defineGetter__("NumDataCodewords",function(){return this.numDataCodewords}),this.__defineGetter__("Codewords",function(){return this.codewords})}function ja(a){var b=a.Dimension;if(21>b||1!=(3&b))throw"Error BitMatrixParser";this.bitMatrix=a,this.parsedVersion=null,this.parsedFormatInfo=null,this.copyBit=function(b,c,a){return this.bitMatrix.get_Renamed(b,c)?a<<1|1:a<<1},this.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var a=0,b=0;6>b;b++)a=this.copyBit(b,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(var c=5;c>=0;c--)a=this.copyBit(8,c,a);if(this.parsedFormatInfo=k.decodeFormatInformation(a),null!=this.parsedFormatInfo)return this.parsedFormatInfo;var d=this.bitMatrix.Dimension;a=0;for(var e=d-8,b=d-1;b>=e;b--)a=this.copyBit(b,8,a);for(var c=d-7;d>c;c++)a=this.copyBit(8,c,a);if(this.parsedFormatInfo=k.decodeFormatInformation(a),null!=this.parsedFormatInfo)return this.parsedFormatInfo;throw"Error readFormatInformation"},this.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var b=this.bitMatrix.Dimension,f=b-17>>2;if(6>=f)return c.getVersionForNumber(f);for(var a=0,g=b-11,d=5;d>=0;d--)for(var e=b-9;e>=g;e--)a=this.copyBit(e,d,a);if(this.parsedVersion=c.decodeVersionInformation(a),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==b)return this.parsedVersion;a=0;for(var e=5;e>=0;e--)for(var d=b-9;d>=g;d--)a=this.copyBit(e,d,a);if(this.parsedVersion=c.decodeVersionInformation(a),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==b)return this.parsedVersion;throw"Error readVersion"},this.readCodewords=function(){var n=this.readFormatInformation(),f=this.readVersion(),m=DataMask.forReference(n.DataMask),c=this.bitMatrix.Dimension;m.unmaskBitMatrix(this.bitMatrix,c);for(var l=f.buildFunctionPattern(),j=!0,k=new Array(f.TotalCodewords),h=0,e=0,g=0,a=c-1;a>0;a-=2){6==a&&a--;for(var d=0;c>d;d++)for(var i=j?c-1-d:d,b=0;2>b;b++)l.get_Renamed(a-b,i)||(g++,e<<=1,this.bitMatrix.get_Renamed(a-b,i)&&(e|=1),8==g&&(k[h++]=e,g=0,e=0));j^=!0}if(h!=f.TotalCodewords)throw"Error readCodewords";return k}}function wa(){this.unmaskBitMatrix=function(d,c){for(var a=0;c>a;a++)for(var b=0;c>b;b++)this.isMasked(a,b)&&d.flip(b,a)},this.isMasked=function(a,b){return 0==(a+b&1)}}function xa(){this.unmaskBitMatrix=function(d,c){for(var a=0;c>a;a++)for(var b=0;c>b;b++)this.isMasked(a,b)&&d.flip(b,a)},this.isMasked=function(a,b){return 0==(1&a)}}function za(){this.unmaskBitMatrix=function(d,c){for(var a=0;c>a;a++)for(var b=0;c>b;b++)this.isMasked(a,b)&&d.flip(b,a)},this.isMasked=function(b,a){return a%3==0}}function Aa(){this.unmaskBitMatrix=function(d,c){for(var a=0;c>a;a++)for(var b=0;c>b;b++)this.isMasked(a,b)&&d.flip(b,a)},this.isMasked=function(a,b){return(a+b)%3==0}}function R(){this.unmaskBitMatrix=function(d,c){for(var a=0;c>a;a++)for(var b=0;c>b;b++)this.isMasked(a,b)&&d.flip(b,a)},this.isMasked=function(a,b){return 0==(n(a,1)+b/3&1)}}function S(){this.unmaskBitMatrix=function(d,c){for(var a=0;c>a;a++)for(var b=0;c>b;b++)this.isMasked(a,b)&&d.flip(b,a)},this.isMasked=function(b,c){var a=b*c;return(1&a)+a%3==0}}function U(){this.unmaskBitMatrix=function(d,c){for(var a=0;c>a;a++)for(var b=0;c>b;b++)this.isMasked(a,b)&&d.flip(b,a)},this.isMasked=function(b,c){var a=b*c;return 0==((1&a)+a%3&1)}}function V(){this.unmaskBitMatrix=function(d,c){for(var a=0;c>a;a++)for(var b=0;c>b;b++)this.isMasked(a,b)&&d.flip(b,a)},this.isMasked=function(a,b){return 0==((a+b&1)+a*b%3&1)}}function W(a){this.field=a,this.decode=function(c,d){for(var p=new l(this.field,c),b=new Array(d),a=0;a<b.length;a++)b[a]=0;for(var h=!1,g=!0,a=0;d>a;a++){var k=p.evaluateAt(this.field.exp(h?a+1:a));b[b.length-1-a]=k,0!=k&&(g=!1)}if(!g)for(var m=new l(this.field,b),j=this.runEuclideanAlgorithm(this.field.buildMonomial(d,1),m,d),n=j[0],o=j[1],e=this.findErrorLocations(n),q=this.findErrorMagnitudes(o,e,h),a=0;a<e.length;a++){var f=c.length-1-this.field.log(e[a]);if(0>f)throw"ReedSolomonException Bad error location";c[f]=i.addOrSubtract(c[f],q[a])}},this.runEuclideanAlgorithm=function(f,e,n){if(f.Degree<e.Degree){var q=f;f=e,e=q}for(var b=f,a=e,h=this.field.One,i=this.field.Zero,g=this.field.Zero,c=this.field.One;a.Degree>=Math.floor(n/2);){var r=b,v=h,t=g;if(b=a,h=i,g=c,b.Zero)throw"r_{i-1} was zero";a=r;for(var d=this.field.Zero,o=b.getCoefficient(b.Degree),p=this.field.inverse(o);a.Degree>=b.Degree&&!a.Zero;){var j=a.Degree-b.Degree,k=this.field.multiply(a.getCoefficient(a.Degree),p);d=d.addOrSubtract(this.field.buildMonomial(j,k)),a=a.addOrSubtract(b.multiplyByMonomial(j,k))}i=d.multiply1(h).addOrSubtract(v),c=d.multiply1(g).addOrSubtract(t)}var l=c.getCoefficient(0);if(0==l)throw"ReedSolomonException sigmaTilde(0) was zero";var m=this.field.inverse(l),u=c.multiply2(m),s=a.multiply2(m);return new Array(u,s)},this.findErrorLocations=function(d){var a=d.Degree;if(1==a)return new Array(d.getCoefficient(1));for(var e=new Array(a),b=0,c=1;256>c&&a>b;c++)0==d.evaluateAt(c)&&(e[b]=this.field.inverse(c),b++);if(b!=a)throw"Error locator degree does not match number of roots";return e},this.findErrorMagnitudes=function(h,d,j){for(var e=d.length,b=new Array(e),a=0;e>a;a++){for(var f=this.field.inverse(d[a]),g=1,c=0;e>c;c++)a!=c&&(g=this.field.multiply(g,i.addOrSubtract(1,this.field.multiply(d[c],f))));b[a]=this.field.multiply(h.evaluateAt(f),this.field.inverse(g)),j&&(b[a]=this.field.multiply(b[a],f))}return b}}function l(e,a){if(null==a||0==a.length)throw"System.ArgumentException";this.field=e;var c=a.length;if(c>1&&0==a[0]){for(var b=1;c>b&&0==a[b];)b++;if(b==c)this.coefficients=e.Zero.coefficients;else{this.coefficients=new Array(c-b);for(var f=0;f<this.coefficients.length;f++)this.coefficients[f]=0;for(var d=0;d<this.coefficients.length;d++)this.coefficients[d]=a[b+d]}}else this.coefficients=a;this.__defineGetter__("Zero",function(){return 0==this.coefficients[0]}),this.__defineGetter__("Degree",function(){return this.coefficients.length-1}),this.__defineGetter__("Coefficients",function(){return this.coefficients}),this.getCoefficient=function(a){return this.coefficients[this.coefficients.length-1-a]},this.evaluateAt=function(b){if(0==b)return this.getCoefficient(0);var e=this.coefficients.length;if(1==b){for(var c=0,a=0;e>a;a++)c=i.addOrSubtract(c,this.coefficients[a]);return c}for(var d=this.coefficients[0],a=1;e>a;a++)d=i.addOrSubtract(this.field.multiply(b,d),this.coefficients[a]);return d},this.addOrSubtract=function(d){if(this.field!=d.field)throw"GF256Polys do not have same GF256 field";if(this.Zero)return d;if(d.Zero)return this;var b=this.coefficients,a=d.coefficients;if(b.length>a.length){var j=b;b=a,a=j}for(var g=new Array(a.length),h=a.length-b.length,f=0;h>f;f++)g[f]=a[f];for(var c=h;c<a.length;c++)g[c]=i.addOrSubtract(b[c-h],a[c]);return new l(e,g)},this.multiply1=function(c){if(this.field!=c.field)throw"GF256Polys do not have same GF256 field";if(this.Zero||c.Zero)return this.field.Zero;for(var e=this.coefficients,f=e.length,g=c.coefficients,h=g.length,d=new Array(f+h-1),a=0;f>a;a++)for(var j=e[a],b=0;h>b;b++)d[a+b]=i.addOrSubtract(d[a+b],this.field.multiply(j,g[b]));return new l(this.field,d)},this.multiply2=function(b){if(0==b)return this.field.Zero;if(1==b)return this;for(var c=this.coefficients.length,d=new Array(c),a=0;c>a;a++)d[a]=this.field.multiply(this.coefficients[a],b);return new l(this.field,d)},this.multiplyByMonomial=function(c,d){if(0>c)throw"System.ArgumentException";if(0==d)return this.field.Zero;for(var e=this.coefficients.length,b=new Array(e+c),a=0;a<b.length;a++)b[a]=0;for(var a=0;e>a;a++)b[a]=this.field.multiply(this.coefficients[a],d);return new l(this.field,b)},this.divide=function(b){if(this.field!=b.field)throw"GF256Polys do not have same GF256 field";if(b.Zero)throw"Divide by 0";for(var c=this.field.Zero,a=this,f=b.getCoefficient(b.Degree),g=this.field.inverse(f);a.Degree>=b.Degree&&!a.Zero;){var d=a.Degree-b.Degree,e=this.field.multiply(a.getCoefficient(a.Degree),g),h=b.multiplyByMonomial(d,e),i=this.field.buildMonomial(d,e);c=c.addOrSubtract(i),a=a.addOrSubtract(h)}return new Array(c,a)}}function i(e){this.expTable=new Array(256),this.logTable=new Array(256);for(var b=1,a=0;256>a;a++)this.expTable[a]=b,b<<=1,b>=256&&(b^=e);for(var a=0;255>a;a++)this.logTable[this.expTable[a]]=a;var c=new Array(1);c[0]=0,this.zero=new l(this,new Array(c));var d=new Array(1);d[0]=1,this.one=new l(this,new Array(d)),this.__defineGetter__("Zero",function(){return this.zero}),this.__defineGetter__("One",function(){return this.one}),this.buildMonomial=function(c,d){if(0>c)throw"System.ArgumentException";if(0==d)return zero;for(var a=new Array(c+1),b=0;b<a.length;b++)a[b]=0;return a[0]=d,new l(this,a)},this.exp=function(a){return this.expTable[a]},this.log=function(a){if(0==a)throw"System.ArgumentException";return this.logTable[a]},this.inverse=function(a){if(0==a)throw"System.ArithmeticException";return this.expTable[255-this.logTable[a]]},this.multiply=function(a,b){return 0==a||0==b?0:1==a?b:1==b?a:this.expTable[(this.logTable[a]+this.logTable[b])%255]}}function n(a,b){return a>=0?a>>b:(a>>b)+(2<<~b)}function _(a,b,c){this.x=a,this.y=b,this.count=1,this.estimatedModuleSize=c,this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return this.x}),this.__defineGetter__("Y",function(){return this.y}),this.incrementCount=function(){this.count++},this.aboutEquals=function(a,c,d){if(Math.abs(c-this.y)<=a&&Math.abs(d-this.x)<=a){var b=Math.abs(a-this.estimatedModuleSize);return 1>=b||b/this.estimatedModuleSize<=1}return!1}}function aa(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2],this.__defineGetter__("BottomLeft",function(){return this.bottomLeft}),this.__defineGetter__("TopLeft",function(){return this.topLeft}),this.__defineGetter__("TopRight",function(){return this.topRight})}function ba(){this.image=null,this.possibleCenters=[],this.hasSkipped=!1,this.crossCheckStateCount=new Array(0,0,0,0,0),this.resultPointCallback=null,this.__defineGetter__("CrossCheckStateCount",function(){return this.crossCheckStateCount[0]=0,this.crossCheckStateCount[1]=0,this.crossCheckStateCount[2]=0,this.crossCheckStateCount[3]=0,this.crossCheckStateCount[4]=0,this.crossCheckStateCount}),this.foundPatternCross=function(a){for(var d=0,e=0;5>e;e++){var f=a[e];if(0==f)return!1;d+=f}if(7>d)return!1;var b=Math.floor((d<<s)/7),c=Math.floor(b/2);return Math.abs(b-(a[0]<<s))<c&&Math.abs(b-(a[1]<<s))<c&&Math.abs(3*b-(a[2]<<s))<3*c&&Math.abs(b-(a[3]<<s))<c&&Math.abs(b-(a[4]<<s))<c},this.centerFromEnd=function(a,b){return b-a[4]-a[3]-a[2]/2},this.crossCheckVertical=function(g,d,c,h){for(var e=this.image,f=qrcode.height,b=this.CrossCheckStateCount,a=g;a>=0&&e[d+a*qrcode.width];)b[2]++,a--;if(0>a)return NaN;for(;a>=0&&!e[d+a*qrcode.width]&&b[1]<=c;)b[1]++,a--;if(0>a||b[1]>c)return NaN;for(;a>=0&&e[d+a*qrcode.width]&&b[0]<=c;)b[0]++,a--;if(b[0]>c)return NaN;for(a=g+1;f>a&&e[d+a*qrcode.width];)b[2]++,a++;if(a==f)return NaN;for(;f>a&&!e[d+a*qrcode.width]&&b[3]<c;)b[3]++,a++;if(a==f||b[3]>=c)return NaN;for(;f>a&&e[d+a*qrcode.width]&&b[4]<c;)b[4]++,a++;if(b[4]>=c)return NaN;var i=b[0]+b[1]+b[2]+b[3]+b[4];return 5*Math.abs(i-h)>=2*h?NaN:this.foundPatternCross(b)?this.centerFromEnd(b,a):NaN},this.crossCheckHorizontal=function(g,d,c,h){for(var e=this.image,f=qrcode.width,b=this.CrossCheckStateCount,a=g;a>=0&&e[a+d*qrcode.width];)b[2]++,a--;if(0>a)return NaN;for(;a>=0&&!e[a+d*qrcode.width]&&b[1]<=c;)b[1]++,a--;if(0>a||b[1]>c)return NaN;for(;a>=0&&e[a+d*qrcode.width]&&b[0]<=c;)b[0]++,a--;if(b[0]>c)return NaN;for(a=g+1;f>a&&e[a+d*qrcode.width];)b[2]++,a++;if(a==f)return NaN;for(;f>a&&!e[a+d*qrcode.width]&&b[3]<c;)b[3]++,a++;if(a==f||b[3]>=c)return NaN;for(;f>a&&e[a+d*qrcode.width]&&b[4]<c;)b[4]++,a++;if(b[4]>=c)return NaN;var i=b[0]+b[1]+b[2]+b[3]+b[4];return 5*Math.abs(i-h)>=h?NaN:this.foundPatternCross(b)?this.centerFromEnd(b,a):NaN},this.handlePossibleCenter=function(a,k,l){var d=a[0]+a[1]+a[2]+a[3]+a[4],b=this.centerFromEnd(a,l),c=this.crossCheckVertical(k,Math.floor(b),a[2],d);if(!isNaN(c)&&(b=this.crossCheckHorizontal(Math.floor(b),Math.floor(c),a[2],d),!isNaN(b))){for(var i=d/7,h=!1,j=this.possibleCenters.length,e=0;j>e;e++){var g=this.possibleCenters[e];if(g.aboutEquals(i,c,b)){g.incrementCount(),h=!0;break}}if(!h){var f=new _(b,c,i);this.possibleCenters.push(f),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(f)}return!0}return!1},this.selectBestPatterns=function(){var c=this.possibleCenters.length;if(3>c)throw"Couldn't find enough finder patterns";if(c>3){for(var e=0,f=0,a=0;c>a;a++){var d=this.possibleCenters[a].EstimatedModuleSize;e+=d,f+=d*d}var b=e/c;this.possibleCenters.sort(function(d,e){var a=Math.abs(e.EstimatedModuleSize-b),c=Math.abs(d.EstimatedModuleSize-b);return c>a?-1:a==c?0:1});for(var g=Math.sqrt(f/c-b*b),h=Math.max(.2*b,g),a=0;a<this.possibleCenters.length&&this.possibleCenters.length>3;a++){var i=this.possibleCenters[a];Math.abs(i.EstimatedModuleSize-b)>h&&(this.possibleCenters.remove(a),a--)}}return this.possibleCenters.length>3&&this.possibleCenters.sort(function(a,b){return a.count>b.count?-1:a.count<b.count?1:0}),new Array(this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2])},this.findRowSkip=function(){var d=this.possibleCenters.length;if(1>=d)return 0;for(var a=null,c=0;d>c;c++){var b=this.possibleCenters[c];if(b.Count>=E){if(null!=a)return this.hasSkipped=!0,Math.floor((Math.abs(a.X-b.X)-Math.abs(a.Y-b.Y))/2);a=b}}return 0},this.haveMultiplyConfirmedCenters=function(){for(var e=0,c=0,d=this.possibleCenters.length,a=0;d>a;a++){var b=this.possibleCenters[a];b.Count>=E&&(e++,c+=b.EstimatedModuleSize)}if(3>e)return!1;for(var g=c/d,f=0,a=0;d>a;a++)b=this.possibleCenters[a],f+=Math.abs(b.EstimatedModuleSize-g);return.05*c>=f},this.findFinderPattern=function(g){var m=!1;this.image=g;var i=qrcode.height,f=qrcode.width,d=Math.floor(3*i/(4*T));(M>d||m)&&(d=M);for(var h=!1,a=new Array(5),e=d-1;i>e&&!h;e+=d){a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0;for(var c=0,b=0;f>b;b++)if(g[b+e*qrcode.width])1==(1&c)&&c++,a[c]++;else if(0==(1&c))if(4==c)if(this.foundPatternCross(a)){var j=this.handlePossibleCenter(a,e,b);if(j)if(d=2,this.hasSkipped)h=this.haveMultiplyConfirmedCenters();else{var k=this.findRowSkip();k>a[2]&&(e+=k-a[2]-d,b=f-1)}else{do b++;while(f>b&&!g[b+e*qrcode.width]);b--}c=0,a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0}else a[0]=a[2],a[1]=a[3],a[2]=a[4],a[3]=1,a[4]=0,c=3;else a[++c]++;else a[c]++;if(this.foundPatternCross(a)){var j=this.handlePossibleCenter(a,e,f);j&&(d=a[0],this.hasSkipped&&(h=haveMultiplyConfirmedCenters()))}}var l=this.selectBestPatterns();return qrcode.orderBestPatterns(l),new aa(l)}}function K(a,b,c){this.x=a,this.y=b,this.count=1,this.estimatedModuleSize=c,this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return Math.floor(this.x)}),this.__defineGetter__("Y",function(){return Math.floor(this.y)}),this.incrementCount=function(){this.count++},this.aboutEquals=function(a,c,d){if(Math.abs(c-this.y)<=a&&Math.abs(d-this.x)<=a){var b=Math.abs(a-this.estimatedModuleSize);return 1>=b||b/this.estimatedModuleSize<=1}return!1}}function ea(a,d,b,c,e,f,g){this.image=a,this.possibleCenters=new Array,this.startX=d,this.startY=b,this.width=c,this.height=e,this.moduleSize=f,this.crossCheckStateCount=new Array(0,0,0),this.resultPointCallback=g,this.centerFromEnd=function(a,b){return b-a[2]-a[1]/2},this.foundPatternCross=function(c){for(var b=this.moduleSize,d=b/2,a=0;3>a;a++)if(Math.abs(b-c[a])>=d)return!1;return!0},this.crossCheckVertical=function(g,d,c,h){var e=this.image,f=qrcode.height,a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var b=g;b>=0&&e[d+b*qrcode.width]&&a[1]<=c;)a[1]++,b--;if(0>b||a[1]>c)return NaN;for(;b>=0&&!e[d+b*qrcode.width]&&a[0]<=c;)a[0]++,b--;if(a[0]>c)return NaN;for(b=g+1;f>b&&e[d+b*qrcode.width]&&a[1]<=c;)a[1]++,b++;if(b==f||a[1]>c)return NaN;for(;f>b&&!e[d+b*qrcode.width]&&a[2]<=c;)a[2]++,b++;if(a[2]>c)return NaN;var i=a[0]+a[1]+a[2];return 5*Math.abs(i-h)>=2*h?NaN:this.foundPatternCross(a)?this.centerFromEnd(a,b):NaN},this.handlePossibleCenter=function(a,i,h){var g=a[0]+a[1]+a[2],c=this.centerFromEnd(a,h),b=this.crossCheckVertical(i,Math.floor(c),2*a[1],g);if(!isNaN(b)){for(var d=(a[0]+a[1]+a[2])/3,j=this.possibleCenters.length,e=0;j>e;e++){var k=this.possibleCenters[e];if(k.aboutEquals(d,b,c))return new K(c,b,d)}var f=new K(c,b,d);this.possibleCenters.push(f),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(f)}return null},this.find=function(){for(var k=this.startX,l=this.height,j=k+c,m=b+(l>>1),d=new Array(0,0,0),g=0;l>g;g++){var h=m+(0==(1&g)?g+1>>1:-(g+1>>1));d[0]=0,d[1]=0,d[2]=0;for(var f=k;j>f&&!a[f+qrcode.width*h];)f++;for(var e=0;j>f;){if(a[f+h*qrcode.width])if(1==e)d[e]++;else if(2==e){if(this.foundPatternCross(d)){var i=this.handlePossibleCenter(d,h,f);if(null!=i)return i}d[0]=d[2],d[1]=1,d[2]=0,e=1}else d[++e]++;else 1==e&&e++,d[e]++;f++}if(this.foundPatternCross(d)){var i=this.handlePossibleCenter(d,h,j);if(null!=i)return i}}if(0!=this.possibleCenters.length)return this.possibleCenters[0];
throw"Couldn't find enough alignment patterns"}}function fa(b,a,c){this.blockPointer=0,this.bitPointer=7,this.dataLength=0,this.blocks=b,this.numErrorCorrectionCode=c,9>=a?this.dataLengthMode=0:a>=10&&26>=a?this.dataLengthMode=1:a>=27&&40>=a&&(this.dataLengthMode=2),this.getNextBits=function(a){var c=0;if(a<this.bitPointer+1){for(var e=0,b=0;a>b;b++)e+=1<<b;return e<<=this.bitPointer-a+1,c=(this.blocks[this.blockPointer]&e)>>this.bitPointer-a+1,this.bitPointer-=a,c}if(a<this.bitPointer+1+8){for(var d=0,b=0;b<this.bitPointer+1;b++)d+=1<<b;return c=(this.blocks[this.blockPointer]&d)<<a-(this.bitPointer+1),this.blockPointer++,c+=this.blocks[this.blockPointer]>>8-(a-(this.bitPointer+1)),this.bitPointer=this.bitPointer-a%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),c}if(a<this.bitPointer+1+16){for(var d=0,f=0,b=0;b<this.bitPointer+1;b++)d+=1<<b;var g=(this.blocks[this.blockPointer]&d)<<a-(this.bitPointer+1);this.blockPointer++;var h=this.blocks[this.blockPointer]<<a-(this.bitPointer+1+8);this.blockPointer++;for(var b=0;b<a-(this.bitPointer+1+8);b++)f+=1<<b;f<<=8-(a-(this.bitPointer+1+8));var i=(this.blocks[this.blockPointer]&f)>>8-(a-(this.bitPointer+1+8));return c=g+h+i,this.bitPointer=this.bitPointer-(a-8)%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),c}return 0},this.NextMode=function(){return this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2?0:this.getNextBits(4)},this.getDataLength=function(b){for(var a=0;;){if(b>>a==1)break;a++}return this.getNextBits(qrcode.sizeOfDataLengthInfo[this.dataLengthMode][a])},this.getRomanAndFigureString=function(e){var a=e,b=0,c="",d=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":");do if(a>1){b=this.getNextBits(11);var f=Math.floor(b/45),g=b%45;c+=d[f],c+=d[g],a-=2}else 1==a&&(b=this.getNextBits(6),c+=d[b],a-=1);while(a>0);return c},this.getFigureString=function(d){var a=d,b=0,c="";do a>=3?(b=this.getNextBits(10),100>b&&(c+="0"),10>b&&(c+="0"),a-=3):2==a?(b=this.getNextBits(7),10>b&&(c+="0"),a-=2):1==a&&(b=this.getNextBits(4),a-=1),c+=b;while(a>0);return c},this.get8bitByteArray=function(d){var a=d,b=0,c=new Array;do b=this.getNextBits(8),c.push(b),a--;while(a>0);return c},this.getKanjiString=function(f){var c=f,a=0,d="";do{a=getNextBits(13);var g=a%192,h=a/192,b=(h<<8)+g,e=0;e=40956>=b+33088?b+33088:b+49472,d+=String.fromCharCode(e),c--}while(c>0);return d},this.__defineGetter__("DataByte",function(){for(var d=new Array,f=1,g=2,h=4,i=8;;){var a=this.NextMode();if(0==a){if(d.length>0)break;throw"Empty data block"}if(a!=f&&a!=g&&a!=h&&a!=i)throw"Invalid mode: "+a+" in (block:"+this.blockPointer+" bit:"+this.bitPointer+")";if(dataLength=this.getDataLength(a),dataLength<1)throw"Invalid data length: "+dataLength;switch(a){case f:for(var c=this.getFigureString(dataLength),e=new Array(c.length),b=0;b<c.length;b++)e[b]=c.charCodeAt(b);d.push(e);break;case g:for(var c=this.getRomanAndFigureString(dataLength),e=new Array(c.length),b=0;b<c.length;b++)e[b]=c.charCodeAt(b);d.push(e);break;case h:var j=this.get8bitByteArray(dataLength);d.push(j);break;case i:var c=this.getKanjiString(dataLength);d.push(c)}}return d})}function y(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?b:a}function z(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}GridSampler={},GridSampler.checkAndNudgePoints=function(h,b){for(var f=qrcode.width,g=qrcode.height,c=!0,a=0;a<b.length&&c;a+=2){var d=Math.floor(b[a]),e=Math.floor(b[a+1]);if(-1>d||d>f||-1>e||e>g)throw"Error.checkAndNudgePoints ";c=!1,-1==d?(b[a]=0,c=!0):d==f&&(b[a]=f-1,c=!0),-1==e?(b[a+1]=0,c=!0):e==g&&(b[a+1]=g-1,c=!0)}c=!0;for(var a=b.length-2;a>=0&&c;a-=2){var d=Math.floor(b[a]),e=Math.floor(b[a+1]);if(-1>d||d>f||-1>e||e>g)throw"Error.checkAndNudgePoints ";c=!1,-1==d?(b[a]=0,c=!0):d==f&&(b[a]=f-1,c=!0),-1==e?(b[a+1]=0,c=!0):e==g&&(b[a+1]=g-1,c=!0)}},GridSampler.sampleGrid3=function(i,f,k){for(var h=new L(f),b=new Array(f<<1),c=0;f>c;c++){for(var g=b.length,j=c+.5,a=0;g>a;a+=2)b[a]=(a>>1)+.5,b[a+1]=j;k.transformPoints1(b),GridSampler.checkAndNudgePoints(i,b);try{for(var a=0;g>a;a+=2){var d=4*Math.floor(b[a])+Math.floor(b[a+1])*qrcode.width*4,e=i[Math.floor(b[a])+qrcode.width*Math.floor(b[a+1])];qrcode.imagedata.data[d]=e?255:0,qrcode.imagedata.data[d+1]=e?255:0,qrcode.imagedata.data[d+2]=0,qrcode.imagedata.data[d+3]=255,e&&h.set_Renamed(a>>1,c)}}catch(l){throw"Error.checkAndNudgePoints"}}return h},GridSampler.sampleGridx=function(b,j,c,d,e,f,g,h,i,a,k,l,n,o,p,q,r,s){var t=m.quadrilateralToQuadrilateral(c,d,e,f,g,h,i,a,k,l,n,o,p,q,r,s);return GridSampler.sampleGrid3(b,j,t)},c.VERSION_DECODE_INFO=new Array(31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017),c.VERSIONS=X(),c.getVersionForNumber=function(a){if(1>a||a>40)throw"ArgumentException";return c.VERSIONS[a-1]},c.getProvisionalVersionForDimension=function(a){if(a%4!=1)throw"Error getProvisionalVersionForDimension";try{return c.getVersionForNumber(a-17>>2)}catch(b){throw"Error getVersionForNumber"}},c.decodeVersionInformation=function(d){for(var b=4294967295,e=0,a=0;a<c.VERSION_DECODE_INFO.length;a++){var f=c.VERSION_DECODE_INFO[a];if(f==d)return this.getVersionForNumber(a+7);var g=k.numBitsDiffering(d,f);b>g&&(e=a+7,b=g)}return 3>=b?this.getVersionForNumber(e):null},m.quadrilateralToQuadrilateral=function(b,j,c,d,e,f,g,h,i,a,k,l,m,n,o,p){var q=this.quadrilateralToSquare(b,j,c,d,e,f,g,h),r=this.squareToQuadrilateral(i,a,k,l,m,n,o,p);return r.times(q)},m.squareToQuadrilateral=function(a,b,c,d,e,f,g,h){return dy2=h-f,dy3=b-d+f-h,0==dy2&&0==dy3?new m(c-a,e-c,a,d-b,f-d,b,0,0,1):(dx1=c-e,dx2=g-e,dx3=a-c+e-g,dy1=d-f,denominator=dx1*dy2-dx2*dy1,a13=(dx3*dy2-dx2*dy3)/denominator,a23=(dx1*dy3-dx3*dy1)/denominator,new m(c-a+a13*c,g-a+a23*g,a,d-b+a13*d,h-b+a23*h,b,a13,a23,1))},m.quadrilateralToSquare=function(a,b,c,d,e,f,g,h){return this.squareToQuadrilateral(a,b,c,d,e,f,g,h).buildAdjoint()};var ya=21522,G=new Array(new Array(21522,0),new Array(20773,1),new Array(24188,2),new Array(23371,3),new Array(17913,4),new Array(16590,5),new Array(20375,6),new Array(19104,7),new Array(30660,8),new Array(29427,9),new Array(32170,10),new Array(30877,11),new Array(26159,12),new Array(25368,13),new Array(27713,14),new Array(26998,15),new Array(5769,16),new Array(5054,17),new Array(7399,18),new Array(6608,19),new Array(1890,20),new Array(597,21),new Array(3340,22),new Array(2107,23),new Array(13663,24),new Array(12392,25),new Array(16177,26),new Array(14854,27),new Array(9396,28),new Array(8579,29),new Array(11994,30),new Array(11245,31)),o=new Array(0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4);k.numBitsDiffering=function(a,b){return a^=b,o[15&a]+o[15&n(a,4)]+o[15&n(a,8)]+o[15&n(a,12)]+o[15&n(a,16)]+o[15&n(a,20)]+o[15&n(a,24)]+o[15&n(a,28)]},k.decodeFormatInformation=function(a){var b=k.doDecodeFormatInformation(a);return null!=b?b:k.doDecodeFormatInformation(a^ya)},k.doDecodeFormatInformation=function(d){for(var a=4294967295,e=0,b=0;b<G.length;b++){var c=G[b],f=c[0];if(f==d)return new k(c[1]);var g=this.numBitsDiffering(d,f);a>g&&(e=c[1],a=g)}return 3>=a?new k(e):null},t.forBits=function(a){if(0>a||a>=F.length)throw"ArgumentException";return F[a]};var N=new t(0,1,"L"),O=new t(1,0,"M"),Ba=new t(2,3,"Q"),Q=new t(3,2,"H"),F=new Array(O,N,Q,Ba);B.getDataBlocks=function(e,k,r){if(e.length!=k.TotalCodewords)throw"ArgumentException";for(var i=k.getECBlocksForLevel(r),m=0,f=i.getECBlocks(),b=0;b<f.length;b++)m+=f[b].Count;for(var c=new Array(m),g=0,a=0;a<f.length;a++)for(var o=f[a],b=0;b<o.Count;b++){var l=o.DataCodewords,q=i.ECCodewordsPerBlock+l;c[g++]=new B(l,new Array(q))}for(var n=c[0].codewords.length,d=c.length-1;d>=0;){var p=c[d].codewords.length;if(p==n)break;d--}d++;for(var j=n-i.ECCodewordsPerBlock,h=0,b=0;j>b;b++)for(var a=0;g>a;a++)c[a].codewords[b]=e[h++];for(var a=d;g>a;a++)c[a].codewords[j]=e[h++];for(var s=c[0].codewords.length,b=j;s>b;b++)for(var a=0;g>a;a++){var t=d>a?b:b+1;c[a].codewords[t]=e[h++]}return c},DataMask={},DataMask.forReference=function(a){if(0>a||a>7)throw"System.ArgumentException";return DataMask.DATA_MASKS[a]},DataMask.DATA_MASKS=new Array(new wa,new xa,new za,new Aa,new R,new S,new U,new V),i.QR_CODE_FIELD=new i(285),i.DATA_MATRIX_FIELD=new i(301),i.addOrSubtract=function(a,b){return a^b},Decoder={},Decoder.rsDecoder=new W(i.QR_CODE_FIELD),Decoder.correctErrors=function(b,d){for(var e=b.length,c=new Array(e),a=0;e>a;a++)c[a]=255&b[a];var f=b.length-d;try{Decoder.rsDecoder.decode(c,f)}catch(g){throw g}for(var a=0;d>a;a++)b[a]=c[a]},Decoder.decode=function(n){for(var d=new ja(n),f=d.readVersion(),h=d.readFormatInformation().ErrorCorrectionLevel,l=d.readCodewords(),b=B.getDataBlocks(l,f,h),e=0,a=0;a<b.length;a++)e+=b[a].NumDataCodewords;for(var g=new Array(e),m=0,c=0;c<b.length;c++){var i=b[c],j=i.Codewords,k=i.NumDataCodewords;Decoder.correctErrors(j,k);for(var a=0;k>a;a++)g[m++]=j[a]}var o=new fa(g,f.VersionNumber,h.Bits);return o},qrcode={},qrcode.imagedata=null,qrcode.width=0,qrcode.height=0,qrcode.qrCodeSymbol=null,qrcode.debug=!1,qrcode.maxImgSize=1048576,qrcode.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],qrcode.callback=null,qrcode.decode=function(d){if(0==arguments.length){var b=document.getElementById("qr-canvas"),c=b.getContext("2d");return qrcode.width=b.width,qrcode.height=b.height,qrcode.imagedata=c.getImageData(0,0,qrcode.width,qrcode.height),qrcode.result=qrcode.process(c),null!=qrcode.callback&&qrcode.callback(qrcode.result),qrcode.result}var a=new Image;a.onload=function(){var b=document.createElement("canvas"),c=b.getContext("2d"),d=a.height,e=a.width;if(a.width*a.height>qrcode.maxImgSize){var f=a.width/a.height;d=Math.sqrt(qrcode.maxImgSize/f),e=f*d}b.width=e,b.height=d,c.drawImage(a,0,0,b.width,b.height),qrcode.width=b.width,qrcode.height=b.height;try{qrcode.imagedata=c.getImageData(0,0,b.width,b.height)}catch(g){return qrcode.result="Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!",void(null!=qrcode.callback&&qrcode.callback(qrcode.result))}try{qrcode.result=qrcode.process(c)}catch(g){console.log(g),qrcode.result="error decoding QR Code"}null!=qrcode.callback&&qrcode.callback(qrcode.result)},a.src=d},qrcode.isUrl=function(a){var b=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return b.test(a)},qrcode.decode_url=function(c){var a="";try{a=escape(c)}catch(d){console.log(d),a=c}var b="";try{b=decodeURIComponent(a)}catch(d){console.log(d),b=a}return b},qrcode.decode_utf8=function(a){return qrcode.isUrl(a)?qrcode.decode_url(a):a},qrcode.process=function(h){var l=(new Date).getTime(),c=qrcode.grayScaleToBitmap(qrcode.grayscale());if(qrcode.debug){for(var a=0;a<qrcode.height;a++)for(var b=0;b<qrcode.width;b++){var e=4*b+a*qrcode.width*4;qrcode.imagedata.data[e]=(c[b+a*qrcode.width],0),qrcode.imagedata.data[e+1]=(c[b+a*qrcode.width],0),qrcode.imagedata.data[e+2]=c[b+a*qrcode.width]?255:0}h.putImageData(qrcode.imagedata,0,0)}var k=new da(c),o=k.detect();qrcode.debug&&h.putImageData(qrcode.imagedata,0,0);for(var m=Decoder.decode(o.bits),f=m.DataByte,i="",d=0;d<f.length;d++)for(var g=0;g<f[d].length;g++)i+=String.fromCharCode(f[d][g]);var n=(new Date).getTime(),j=n-l;return console.log(j),qrcode.decode_utf8(i)},qrcode.getPixel=function(a,b){if(qrcode.width<a)throw"point error";if(qrcode.height<b)throw"point error";return point=4*a+b*qrcode.width*4,p=(33*qrcode.imagedata.data[point]+34*qrcode.imagedata.data[point+1]+33*qrcode.imagedata.data[point+2])/100,p},qrcode.binarize=function(d){for(var c=new Array(qrcode.width*qrcode.height),a=0;a<qrcode.height;a++)for(var b=0;b<qrcode.width;b++){var e=qrcode.getPixel(b,a);c[b+a*qrcode.width]=d>=e?!0:!1}return c},qrcode.getMiddleBrightnessPerArea=function(n){for(var b=4,m=Math.floor(qrcode.width/b),l=Math.floor(qrcode.height/b),d=new Array(b),f=0;b>f;f++){d[f]=new Array(b);for(var g=0;b>g;g++)d[f][g]=new Array(0,0)}for(var a=0;b>a;a++)for(var c=0;b>c;c++){d[c][a][0]=255;for(var j=0;l>j;j++)for(var k=0;m>k;k++){var e=n[m*c+k+(l*a+j)*qrcode.width];e<d[c][a][0]&&(d[c][a][0]=e),e>d[c][a][1]&&(d[c][a][1]=e)}}for(var h=new Array(b),i=0;b>i;i++)h[i]=new Array(b);for(var a=0;b>a;a++)for(var c=0;b>c;c++)h[c][a]=Math.floor((d[c][a][0]+d[c][a][1])/2);return h},qrcode.grayScaleToBitmap=function(h){for(var i=qrcode.getMiddleBrightnessPerArea(h),c=i.length,f=Math.floor(qrcode.width/c),g=Math.floor(qrcode.height/c),j=new Array(qrcode.height*qrcode.width),a=0;c>a;a++)for(var b=0;c>b;b++)for(var d=0;g>d;d++)for(var e=0;f>e;e++)j[f*b+e+(g*a+d)*qrcode.width]=h[f*b+e+(g*a+d)*qrcode.width]<i[b][a]?!0:!1;return j},qrcode.grayscale=function(){for(var c=new Array(qrcode.width*qrcode.height),a=0;a<qrcode.height;a++)for(var b=0;b<qrcode.width;b++){var d=qrcode.getPixel(b,a);c[b+a*qrcode.width]=d}return c},Array.prototype.remove=function(a,b){var c=this.slice((b||a)+1||this.length);return this.length=0>a?this.length+a:a,this.push.apply(this,c)};var M=3,T=57,s=8,E=2;qrcode.orderBestPatterns=function(a){function e(a,b){return xDiff=a.X-b.X,yDiff=a.Y-b.Y,Math.sqrt(xDiff*xDiff+yDiff*yDiff)}function i(a,b,c){var d=b.x,e=b.y;return(c.x-d)*(a.y-e)-(c.y-e)*(a.x-d)}var b,d,c,h=e(a[0],a[1]),f=e(a[1],a[2]),g=e(a[0],a[2]);if(f>=h&&f>=g?(d=a[0],b=a[1],c=a[2]):g>=f&&g>=h?(d=a[1],b=a[0],c=a[2]):(d=a[2],b=a[0],c=a[1]),i(b,d,c)<0){var j=b;b=c,c=j}a[0]=b,a[1]=d,a[2]=c};var d,u=function(){function q(){if(!l&&document.getElementsByTagName("body")[0]){try{var a,c=f("span");c.style.display="none",a=b.getElementsByTagName("body")[0].appendChild(c),a.parentNode.removeChild(a),a=null,c=null}catch(g){return}l=!0;for(var e=o.length,d=0;e>d;d++)o[d]()}}function I(a){l?a():o[o.length]=a}function U(a){if(typeof e.addEventListener!=c)e.addEventListener("load",a,!1);else if(typeof b.addEventListener!=c)b.addEventListener("load",a,!1);else if(typeof e.attachEvent!=c)X(e,"onload",a);else if("function"==typeof e.onload){var d=e.onload;e.onload=function(){d(),a()}}else e.onload=a}function T(){var h=b.getElementsByTagName("body")[0],e=f(i);e.setAttribute("style","visibility: hidden;"),e.setAttribute("type",x);var g=h.appendChild(e);if(g){var j=0;!function k(){if(typeof g.GetVariable!=c)try{var b=g.GetVariable("$version");b&&(b=b.split(" ")[1].split(","),a.pv=[d(b[0]),d(b[1]),d(b[2])])}catch(f){a.pv=[8,0,0]}else if(10>j)return j++,void setTimeout(k,10);h.removeChild(e),g=null,z()}()}else z()}function z(){var p=h.length;if(p>0)for(var g=0;p>g;g++){var e=h[g].id,f=h[g].callbackFn,b={success:!1,id:e};if(a.pv[0]>0){var d=m(e);if(d)if(!s(h[g].swfVersion)||a.wk&&a.wk<312)if(h[g].expressInstall&&C()){var i={};i.data=h[g].expressInstall,i.width=d.getAttribute("width")||"0",i.height=d.getAttribute("height")||"0",d.getAttribute("class")&&(i.styleclass=d.getAttribute("class")),d.getAttribute("align")&&(i.align=d.getAttribute("align"));for(var o={},n=d.getElementsByTagName("param"),q=n.length,j=0;q>j;j++)"movie"!=n[j].getAttribute("name").toLowerCase()&&(o[n[j].getAttribute("name")]=n[j].getAttribute("value"));F(i,o,e,f)}else W(d),f&&f(b);else k(e,!0),f&&(b.success=!0,b.ref=A(e),b.id=e,f(b))}else if(k(e,!0),f){var l=A(e);l&&typeof l.SetVariable!=c&&(b.success=!0,b.ref=l,b.id=l.id),f(b)}}}function A(d){var b=null,a=m(d);return a&&"OBJECT"===a.nodeName.toUpperCase()&&(b=typeof a.SetVariable!==c?a:a.getElementsByTagName(i)[0]||a),b}function C(){return!t&&s("6.0.65")&&(a.win||a.mac)&&!(a.wk&&a.wk<312)}function F(g,j,i,n){var h=m(i);if(i=H(i),t=!0,B=n||null,O={success:!1,id:i},h){"OBJECT"==h.nodeName.toUpperCase()?(p=G(h),r=null):(p=h,r=i),g.id=K,(typeof g.width==c||!/%$/.test(g.width)&&d(g.width)<310)&&(g.width="310"),(typeof g.height==c||!/%$/.test(g.height)&&d(g.height)<137)&&(g.height="137");var o=a.ie?"ActiveX":"PlugIn",k="MMredirectURL="+encodeURIComponent(e.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+o+"&MMdoctitle="+encodeURIComponent(b.title.slice(0,47)+" - Flash Player Installation");if(typeof j.flashvars!=c?j.flashvars+="&"+k:j.flashvars=k,a.ie&&4!=h.readyState){var l=f("div");i+="SWFObjectNew",l.setAttribute("id",i),h.parentNode.insertBefore(l,h),h.style.display="none",v(h)}D(g,j,i)}}function W(b){if(a.ie&&4!=b.readyState){b.style.display="none";var c=f("div");b.parentNode.insertBefore(c,b),c.parentNode.replaceChild(G(b),c),v(b)}else b.parentNode.replaceChild(G(b),b)}function G(e){var d=f("div");if(a.win&&a.ie)d.innerHTML=e.innerHTML;else{var g=e.getElementsByTagName(i)[0];if(g){var b=g.childNodes;if(b)for(var h=b.length,c=0;h>c;c++)1==b[c].nodeType&&"PARAM"==b[c].nodeName||8==b[c].nodeType||d.appendChild(b[c].cloneNode(!0))}}return d}function V(b,c){var a=f("div");return a.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+b+"'>"+c+"</object>",a.firstChild}function D(b,k,h){var l,n=m(h);if(h=H(h),a.wk&&a.wk<312)return l;if(n){var e,j,g,d=f(a.ie?"div":i);typeof b.id==c&&(b.id=h);for(g in k)k.hasOwnProperty(g)&&"movie"!==g.toLowerCase()&&S(d,g,k[g]);a.ie&&(d=V(b.data,d.innerHTML));for(e in b)b.hasOwnProperty(e)&&(j=e.toLowerCase(),"styleclass"===j?d.setAttribute("class",b[e]):"classid"!==j&&"data"!==j&&d.setAttribute(e,b[e]));a.ie?w[w.length]=b.id:(d.setAttribute("type",x),d.setAttribute("data",b.data)),n.parentNode.replaceChild(d,n),l=d}return l}function S(b,c,d){var a=f("param");a.setAttribute("name",c),a.setAttribute("value",d),b.appendChild(a)}function v(c){var b=m(c);b&&"OBJECT"==b.nodeName.toUpperCase()&&(a.ie?(b.style.display="none",function d(){if(4==b.readyState){for(var a in b)"function"==typeof b[a]&&(b[a]=null);b.parentNode.removeChild(b)}else setTimeout(d,10)}()):b.parentNode.removeChild(b))}function J(a){return a&&a.nodeType&&1===a.nodeType}function H(a){return J(a)?a.id:a}function m(a){if(J(a))return a;var c=null;try{c=b.getElementById(a)}catch(d){}return c}function f(a){return b.createElement(a)}function d(a){return parseInt(a,10)}function X(a,b,c){a.attachEvent(b,c),n[n.length]=[a,b,c]}function s(e){e+="";var c=a.pv,b=e.split(".");return b[0]=d(b[0]),b[1]=d(b[1])||0,b[2]=d(b[2])||0,c[0]>b[0]||c[0]==b[0]&&c[1]>b[1]||c[0]==b[0]&&c[1]==b[1]&&c[2]>=b[2]?!0:!1}function N(g,h,i,l){var k=b.getElementsByTagName("head")[0];if(k){var d="string"==typeof i?i:"screen";if(l&&(j=null,E=null),!j||E!=d){var e=f("style");e.setAttribute("type","text/css"),e.setAttribute("media",d),j=k.appendChild(e),a.ie&&typeof b.styleSheets!=c&&b.styleSheets.length>0&&(j=b.styleSheets[b.styleSheets.length-1]),E=d}j&&(typeof j.addRule!=c?j.addRule(g,h):typeof b.createTextNode!=c&&j.appendChild(b.createTextNode(g+" {"+h+"}")))}}function k(a,d){if(M){var b=d?"visible":"hidden",c=m(a);l&&c?c.style.visibility=b:"string"==typeof a&&N("#"+a,"visibility:"+b)}}function R(a){var b=/[\\\"<>\.;]/,d=null!=b.exec(a);return d&&typeof encodeURIComponent!=c?encodeURIComponent(a):a}var p,r,B,O,j,E,c="undefined",i="object",Q="Shockwave Flash",Y="ShockwaveFlash.ShockwaveFlash",x="application/x-shockwave-flash",K="SWFObjectExprInst",L="onreadystatechange",e=window,b=document,g=navigator,P=!1,o=[],h=[],w=[],n=[],l=!1,t=!1,M=!0,y=!1,a=function(){var o=typeof b.getElementById!=c&&typeof b.getElementsByTagName!=c&&typeof b.createElement!=c,j=g.userAgent.toLowerCase(),h=g.platform.toLowerCase(),p=h?/win/.test(h):/win/.test(j),n=h?/mac/.test(h):/mac/.test(j),m=/webkit/.test(j)?parseFloat(j.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,k="Microsoft Internet Explorer"===g.appName,f=[0,0,0],a=null;if(typeof g.plugins!=c&&typeof g.plugins[Q]==i)a=g.plugins[Q].description,a&&typeof g.mimeTypes!=c&&g.mimeTypes[x]&&g.mimeTypes[x].enabledPlugin&&(P=!0,k=!1,a=a.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=d(a.replace(/^(.*)\..*$/,"$1")),f[1]=d(a.replace(/^.*\.(.*)\s.*$/,"$1")),f[2]=/[a-zA-Z]/.test(a)?d(a.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof e.ActiveXObject!=c)try{var l=new ActiveXObject(Y);l&&(a=l.GetVariable("$version"),a&&(k=!0,a=a.split(" ")[1].split(","),f=[d(a[0]),d(a[1]),d(a[2])]))}catch(q){}return{w3:o,pv:f,wk:m,ie:k,win:p,mac:n}}();(function(){a.w3&&((typeof b.readyState!=c&&("complete"===b.readyState||"interactive"===b.readyState)||typeof b.readyState==c&&(b.getElementsByTagName("body")[0]||b.body))&&q(),l||(typeof b.addEventListener!=c&&b.addEventListener("DOMContentLoaded",q,!1),a.ie&&(b.attachEvent(L,function d(){"complete"==b.readyState&&(b.detachEvent(L,d),q())}),e==top&&!function f(){if(!l){try{b.documentElement.doScroll("left")}catch(a){return void setTimeout(f,0)}q()}}()),a.wk&&!function g(){return l?void 0:/loaded|complete/.test(b.readyState)?void q():void setTimeout(g,0)}()))})();o[0]=function(){P?T():z()};(function(){a.ie&&window.attachEvent("onunload",function(){for(var d=n.length,b=0;d>b;b++)n[b][0].detachEvent(n[b][1],n[b][2]);for(var e=w.length,c=0;e>c;c++)v(w[c]);for(var f in a)a[f]=null;a=null;for(var g in u)u[g]=null;u=null})})();return{registerObject:function(c,e,f,d){if(a.w3&&c&&e){var b={};b.id=c,b.swfVersion=e,b.expressInstall=f,b.callbackFn=d,h[h.length]=b,k(c,!1)}else d&&d({success:!1,id:c})},getObjectById:function(b){return a.w3?A(b):void 0},embedSWF:function(p,g,m,l,n,o,b,h,j,f){var e=H(g),d={success:!1,id:e};a.w3&&!(a.wk&&a.wk<312)&&p&&g&&m&&l&&n?(k(e,!1),I(function(){m+="",l+="";var a={};if(j&&typeof j===i)for(var t in j)a[t]=j[t];a.data=p,a.width=m,a.height=l;var q={};if(h&&typeof h===i)for(var u in h)q[u]=h[u];if(b&&typeof b===i)for(var r in b)if(b.hasOwnProperty(r)){var v=y?encodeURIComponent(r):r,w=y?encodeURIComponent(b[r]):b[r];typeof q.flashvars!=c?q.flashvars+="&"+v+"="+w:q.flashvars=v+"="+w}if(s(n)){var x=D(a,q,g);a.id==e&&k(e,!0),d.success=!0,d.ref=x,d.id=x.id}else{if(o&&C())return a.data=o,void F(a,q,g,f);k(e,!0)}f&&f(d)})):f&&f(d)},switchOffAutoHideShow:function(){M=!1},enableUriEncoding:function(a){y=typeof a===c?!0:a},ua:a,getFlashPlayerVersion:function(){return{major:a.pv[0],minor:a.pv[1],release:a.pv[2]}},hasFlashPlayerVersion:s,createSWF:function(b,c,d){return a.w3?D(b,c,d):void 0},showExpressInstall:function(b,c,d,e){a.w3&&C()&&F(b,c,d,e)},removeSWF:function(b){a.w3&&v(b)},createCSS:function(b,c,d,e){a.w3&&N(b,c,d,e)},addDomLoadEvent:I,addLoadEvent:U,getQueryParamValue:function(e){var a=b.location.search||b.location.hash;if(a){if(/\?/.test(a)&&(a=a.split("?")[1]),null==e)return R(a);for(var d=a.split("&"),c=0;c<d.length;c++)if(d[c].substring(0,d[c].indexOf("="))==e)return R(d[c].substring(d[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(t){var b=m(K);b&&p&&(b.parentNode.replaceChild(p,b),r&&(k(r,!0),a.ie&&(p.style.display="block")),B&&B(O)),t=!1}},version:"2.3"}}(),Y=function Ca(a,c,d){null===a&&(a=Function.prototype);var b=Object.getOwnPropertyDescriptor(a,c);if(void 0===b){var e=Object.getPrototypeOf(a);return null===e?void 0:Ca(e,c,d)}if("value"in b)return b.value;var f=b.get;if(void 0!==f)return f.call(d)},f=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(a){var b=function(){function a(){e(this,a)}return f(a,null,[{key:"getAnimationFrame",value:function(a){var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;return b(a)}},{key:"cancelAnimationFrame",value:function b(a){var b=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;b(a)}}]),a}();a.AnimationHelper=b}(d||(d={}));var d;!function(a){!function(a){a[a.PerResolveCall=0]="PerResolveCall",a[a.SingleInstance=1]="SingleInstance",a[a.PerDependency=2]="PerDependency"}(a.LifetimeScope||(a.LifetimeScope={}));a.LifetimeScope}(d||(d={}));var d;!function(a){var b=function(){function a(){e(this,a),this.initiated=!1,this.loaded=!1}return f(a,[{key:"getInstance",value:function(){var a=this,b=function(){return a.initiated||a.instantiate(),a.object};return b()}},{key:"getType",value:function(){return this.type}},{key:"setType",value:function(a){var b=this;return this.type=a,function(){return b}()}},{key:"instantiate",value:function(){throw new TypeError("Not Implemented Method called\nYou have to override the Instantiate Method to use this Class")}},{key:"setResolveFunc",value:function(a){return this.resolveFunc=a,this}},{key:"setInstantiateFunc",value:function(a){return this.instantiateFunc=a,this}},{key:"setLifetimeScope",value:function(a){throw new TypeError("Not Implemented Method called\nYou have to override the Instantiate Method to use this Class")}}]),a}();a.RegistryBase=b}(d||(d={}));var d;!function(a){var b=function(c){function b(){var f;e(this,b);for(var g=arguments.length,h=Array(g),c=0;g>c;c++)h[c]=arguments[c];var d=y(this,(f=Object.getPrototypeOf(b)).call.apply(f,[this].concat(h)));return d.lifeTimeScope=a.LifetimeScope.PerResolveCall,d.callers={},d}return z(b,c),f(b,[{key:"getInstance",value:function(){var b=this,c=void 0;switch(this.lifeTimeScope){case a.LifetimeScope.SingleInstance:c=function(){return b.initiated||b.instantiate(),b.object};break;case a.LifetimeScope.PerDependency:var d=this.getInstance.caller.toString();if(!d)throw new TypeError("Method not allowed!\nYou should not resolve this dependency from the global scope!");c=function(){return b.callers[d]||(b.instantiate(),b.callers[d]=b.object),b.callers[d]};break;default:this.instantiate(),c=function(){return b.instantiate(),b.object}}return c()}},{key:"instantiate",value:function(){void 0!==this.type&&(this.object=this.instantiateFunc?this.instantiateFunc():new this.type,this.resolveFunc&&this.resolveFunc(this.object),this.initiated=!0)}},{key:"setLifetimeScope",value:function(a){return this.lifeTimeScope=a,this}}]),b}(a.RegistryBase);a.InstanceRegistry=b}(d||(d={}));var d;!function(a){var b=function(){function b(a){e(this,b),b.container=this,this.appName=a,this.registeredInstances=new Array,this.registeredScripts=new Array}return f(b,[{key:"getAppName",value:function(){return this.appName}},{key:"register",value:function(c){var b=(new a.InstanceRegistry).setType(c);return this.registeredInstances.push(b),b}},{key:"resolve",value:function(a){var b=this.registeredInstances.filter(function(b,c,d){return b.getType()===a?!0:!1})[0];if(!b)throw new ReferenceError("Could not resolve '"+a.name+"'. The type was not found.");return b.getInstance()}}],[{key:"getCurrent",value:function(){return b.container}}]),b}();a.Container=b}(d||(d={}));var d;!function(a){var b=function(){function b(c){e(this,b),b.applicationContext=this;var d=new a.Container(c);this.register(d)}return f(b,[{key:"register",value:function(a){throw new Error("Not Implemented Method called\nYou have to override the Register Method to use this Application")}}]),b}();a.ApplicationContext=b}(d||(d={}));var j=function Da(){e(this,Da)};j.agreedToTOA="agreedToTOA/V-1",j.pdfBase=/^data:application\/pdf;base64,JVBER/gim,j.imageTypes={jpeg:[/^data:image\/jp(e?)g;base64,\/9j\/4/im],jpg:[/^data:image\/jp(e?)g;base64,\/9j\/4/im],png:[/^data:image\/png;base64,iVBOR/im],gif:[/^data:image\/gif;base64,R0lGODlh/im],bmp:[/^data:image\/bmp;base64,Qk/im]},j.invalidUrls=["adclick.g.doubleclick.net","addthis.com","adgardener.com","adnxs.com","ads.pointroll.com","ads.shorttail.net","apture.com","bop.fm","cdn.taboolasyndication.com","chartbeat.com","chartbeat.net","d1.openx.org","doubleclick.net","doubleverify.com","exitjunction.com","fyre.co","getconnected.southwestwi-fi.com","googleadservices.com","gravity.com","grvcdn.com","imrworldwide.com","intellitxt.com","jetpackdigital.com","kontera.com","livefyre.com","luminate.com","meebo.com","moovmanage.com","outbrain.com","parsely.com","po.st","pointroll.com","pubmatic.com","quantserve.com","s.ppjol.net","scorecardresearch.com","serving-sys.com","sharethis.com","snap.com","superclick.com","taboola.com","taboolasyndication.com","tynt.com","wibiya.com"],j.transparentGif="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";var D=function(){function a(){e(this,a)}return f(a,null,[{key:"getCookie",value:function(e){for(var c=e+"=",d=document.cookie.split(";"),b=0;b<d.length;b++){for(var a=d[b];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(c))return a.substring(c.length,a.length)}return null}},{key:"setCookie",value:function(c,d){var a=arguments.length<=2||void 0===arguments[2]?null:arguments[2],e=arguments.length<=3||void 0===arguments[3]?!0:arguments[3],b=String();a&&(b="; expires="+a.toUTCString()),document.cookie=c+"="+d.toString()+b+(e?"; secure":String())+"; path=/"}},{key:"eraseCookie",value:function(b){a.setCookie(b,String())}}]),a}(),C=(function(){function a(){e(this,a)}return f(a,null,[{key:"isTouchEnabled",value:function(){return!!("ontouchstart"in window||"onmsgesturechange"in window)}}]),a}(),function(){function a(){e(this,a)}return f(a,null,[{key:"presentDownload",value:function(c,d,e){var b=(arguments.length<=3||void 0===arguments[3]?"attachment/text":arguments[3],a.getDownloadElement(c,d,e));b.click(),b=null}},{key:"getDownloadElement",value:function(b,c,d){var e=arguments.length<=3||void 0===arguments[3]?"attachment/text":arguments[3],a=document.createElement("a");return a.href="data:"+e+","+encodeURI(d),a.target="_blank",a.setAttribute("download",b+" ("+(new Date).toISOString().slice(0,10)+")."+c),a}}]),a}()),r=function(){function a(){e(this,a)}return f(a,null,[{key:"matchBetweenKeyAndSemicolon",value:function(a,b){var c=function(a){return new RegExp("("+a+":\\s*)([^;]+)+","mi")},d=b.match(c(a));return c(a).test(b)?3!==d.length?String():d[2]:String()}}]),a}(),ca=function(){function a(){e(this,a)}return f(a,null,[{key:"redirect",value:function(a,b){window.location.replace(a),window.location.assign(a),b&&window.setTimeout(b,2e3)}}]),a}(),w=function(){function a(){e(this,a)}return f(a,null,[{key:"hasGetUserMedia",value:function(){return this.hasPolyfill||this.setPolyFill(),!!navigator.getUserMedia}},{key:"getUserMedia",value:function(b){var c=arguments.length<=1||void 0===arguments[1]?function(){return null}:arguments[1],d=arguments.length<=2||void 0===arguments[2]?function(){return null}:arguments[2];return this.hasPolyfill||this.setPolyFill(),a.hasGetUserMedia()?navigator.getUserMedia(b,c,d):null}},{key:"setPolyFill",value:function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia}}]),a}();w.hasPolyfill=!1;var q=function(){function a(){e(this,a)}return f(a,null,[{key:"toArray",value:function(b){var a=(arguments.length<=1||void 0===arguments[1]?!1:arguments[1],0);return Object.keys(b).filter(function(c){var b=a%2===0;return a++,b})}},{key:"first",value:function(a,b){return b?a.find(b)[0]||null:a[0]||null}},{key:"getDefault",value:function(a){return a[0]?a[0]:null}},{key:"firstOrDefault",value:function(a,b){return a.first(b)||a.getDefault()}},{key:"$filter",value:function(a,b){return this.filter(a,b)}},{key:"filter",value:function(d,a){var c=new Array;if(!a)return c;for(var b=0,e=a.length;e>b;b++)d(a[b],b,a)&&c.push(a[b]);return c}},{key:"$find",value:function(a,b){return this.find(a,b)}},{key:"find",value:function(d,a){var c=new Array;if(!a)return c;for(var b=0,e=a.length;e>b;b++)if(d(a[b],b,a))return c.push(a[b]),c;return c}},{key:"$map",value:function(a,b){
return this.map(a,b)}},{key:"map",value:function(d,a){var c=new Array;if(!a)return c;for(var e=a.length,b=0;e>b;)c.push(d(a[b],b,a)),b++;return c}}]),a}();Array.prototype.first=function(a){return q.first(this,a)},Array.prototype.firstOrDefault=function(a){return q.firstOrDefault(this,a)},Array.prototype.getDefault=function(){return q.getDefault(this)},Array.prototype.filter=function(a){return q.$filter(a,this)},Array.prototype.find=function(a){return q.$find(a,this)},Array.prototype.map=function(a){return q.$map(a,this)};var g,ga=function(){function a(){e(this,a)}return f(a,[{key:"nextFallback",value:function(){}},{key:"declinedFallback",value:function(){}},{key:"initiate",value:function(){return 0===u.getFlashPlayerVersion().major?void this.nextFallback():(a.currentFlashImageProcessor=this,this.buildHtml(),this.initializeFlash(),void(qrcode.callback=this.qrCallback.bind(this)))}},{key:"buildHtml",value:function(){var b={deniedMethod:"FlashImageProcessor.flashDeclined",exportDataMethod:"FlashImageProcessor.renderVideo",notSupportedMethod:"FlashImageProcessor.cameraNotSupported"},a={scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always",bgcolor:"#000",movie:"Content/HaxeCam.swf",quality:"high"},c={id:"flashVideo",wmode:"transparent"};u.embedSWF(a.movie,document.querySelector("#appBody"),"100%","100%",20,null,b,a,c),this.flashVideo=document.querySelector("object")}},{key:"initializeFlash",value:function(){var a=this;this.flashVideo.onload=function(){a.flashVideo.focus(),a.flashVideo.click()},window.onfocus=document.onfocus=document.querySelector("body").onfocus=function(){a.flashVideo.focus(),a.flashVideo.click()},this.flashVideo.style.visibility="visible"}},{key:"qrCallback",value:function(a){d.ApplicationContext.applicationContext.qrCallback(a,function(a){})}}],[{key:"flashDeclined",value:function(){this.currentFlashImageProcessor.declinedFallback()}},{key:"cameraNotSupported",value:function(){this.currentFlashImageProcessor.nextFallback()}},{key:"renderVideo",value:function(a){qrcode.decode(a)}}]),a}(),ha=function(){function a(){e(this,a)}return f(a,[{key:"nextFallback",value:function(){}},{key:"declinedFallback",value:function(){}},{key:"initiate",value:function(){return w.hasGetUserMedia()?(this.buildHtml(),this.initializeVideo(),void(qrcode.callback=this.qrCallback.bind(this))):void this.nextFallback()}},{key:"buildHtml",value:function(){this.video=document.createElement("video"),this.video.id="mainVideo",this.video.muted=!0,this.video.autoplay=!1,this.video.loop=!0,document.body.querySelector("#appBody").appendChild(this.video)}},{key:"initializeVideo",value:function(){var a=this,b=null,d=!1,c=document.createElement("canvas"),e=function(){if(!d)return window.clearInterval(b),b=null,void a.declinedFallback();var e=v.applicationContext;if(!e.pauseCapture){console.log("video parse");var f=c.getContext("2d");f.drawImage(a.video,0,0,c.width,c.height);var g=c.toDataURL();qrcode.decode(g)}};w.getUserMedia({audio:!1,video:!0},function(c){d=!0,a.video.src=window.URL.createObjectURL(c),a.video.play(),b=window.setInterval(e,200)},function(c){a.video.style.display="none",d=!1,null!=b&&(window.clearInterval(b),b=null),a.declinedFallback()}),this.video.style.display="block"}},{key:"qrCallback",value:function(a){d.ApplicationContext.applicationContext.qrCallback(a,function(a){})}}]),a}(),ia=function(){function a(){e(this,a)}return f(a,[{key:"nextFallback",value:function(){}},{key:"declinedFallback",value:function(){}},{key:"initiate",value:function(){this.buildHtml(),this.initializeUpload(),qrcode.callback=this.qrCallback.bind(this)}},{key:"buildHtml",value:function(){this.form=document.createElement("form"),this.form.id="mainForm",this.form.action=String(),this.form.method="POST",this.form.enctype="multipart/form-data";var a=document.createElement("label"),b=document.createElement("div");b.setAttribute("class","label"),b.innerHTML='Tap to select<wbr/> <span class="no-break">QR-Code</span>',this.errorField=document.createElement("div"),this.errorField.setAttribute("class","error"),this.cameraInput=document.createElement("input"),this.cameraInput.type="file",this.cameraInput.name="file",this.cameraInput.accept="image/*;capture=camera",this.cameraInput.setAttribute("capture","camera"),a.appendChild(b),a.appendChild(this.errorField),a.appendChild(this.cameraInput),this.form.appendChild(a),document.body.querySelector("#appBody").appendChild(this.form)}},{key:"initializeUpload",value:function(){var a=this;this.cameraInput.onfocus=function(a){return document.body.focus()},this.form.onsubmit=function(a){return a.cancelBubble=!0,a.preventDefault(),a},this.cameraInput.onclick=function(b){return a.clearErrors()},this.cameraInput.onchange=function(b){return a.clearErrors(),b.cancelBubble=!0,b.preventDefault(),a.cameraInput.value?(a.readQR(),a.reset(),b):(a.reset(),b)}}},{key:"readQR",value:function(){var b=this.cameraInput.files[0];if(b){var a=new FileReader;a.onloadend=function(){console.log("Created DataUrl: "+a.result),qrcode.decode(a.result)},a.readAsDataURL(b)}}},{key:"reset",value:function(){this.cameraInput.value=null}},{key:"clearErrors",value:function(){this.errorField.innerText=String()}},{key:"setError",value:function(a){this.errorField.innerText=a}},{key:"qrCallback",value:function(a){var b=this;d.ApplicationContext.applicationContext.qrCallback(a,function(a){return b.setError(a)})}}]),a}();!function(a){a[a.Text=null]="Text",a[a.Illustration=/^(data:image\/){1}(.+)(;base64,){1}/im]="Illustration",a[a.PDF=/^(data:application\/pdf;base64,){1}/im]="PDF",a[a.RawFile=/^(data:)(.+)(;base64,){1}/im]="RawFile",a[a.Url=/^(\s)*(https?:\/\/)([a-zA-Z0-9\_\-\.\/\?\=\&\#\:\[\]\{\}]+[a-zA-Z0-9\?\&\#\/\]\}?])(\s)*$/i]="Url",a[a.VCard=/(BEGIN:VCARD(\s*)){1}(\w*\W*\s*?)*((\s*?)END:VCARD){1}/im]="VCard",a[a.SMS=/^(sms(to)?(:)?(\s)?)/i]="SMS",a[a.PhoneCall=/^(tel(:)?(\s)?)/i]="PhoneCall",a[a.GeoLocation=/^(geo(:)?(\s)?)/i]="GeoLocation",a[a.VEvent=/(BEGIN:V(\w*\W*)?(\s*)){1}(\w*\W*\s*?)*((\s*?)END:V(\w*\W*)?){1}/im]="VEvent",a[a.Email=/^(mailto:(\s)?)/i]="Email",a[a.MATMsg=/^(MATMSG(:)?(\s)?)/i]="MATMsg",a[a.WifiData=/^(WIFI(:)?(\s)?)/i]="WifiData"}(g||(g={}));var H=function(){function a(){e(this,a),this.dataType=g.Email}return f(a,[{key:"process",value:function(c){var e=d.Container.getCurrent().resolve(h),a=c.replace(g.Email,String());a=a.indexOf("?")<0?a:a.split("?")[0];var b=document.createElement("a");b.href=c,b.className="textMessage",e.showCallToAction(g[g.Email]+": "+a,b)}}]),a}(),ka=function(){function a(){e(this,a),this.dataType=g.GeoLocation,this.mapsUrl="https://www.google.nl/maps/place",this.staticMapsUrl="http://maps.google.com/maps/api/staticmap"}return f(a,[{key:"process",value:function(f){var j=d.Container.getCurrent().resolve(h),e=f.replace(this.dataType,String()).split(","),b=document.createElement("div");b.className="geo";var i=document.createElement("img");i.src=this.buildStaticMapImage(e);var c=document.createElement("a");c.href=f,c.className="map",c.appendChild(i),b.appendChild(c);var a=document.createElement("a");a.href=this.mapsUrl+"/"+e[0]+","+e[1],a.innerText="Show on Google maps",a.target="_blank",a.className="googleMap",b.appendChild(a),j.showCallToAction(""+g[this.dataType],b)}},{key:"buildStaticMapImage",value:function(a){return this.staticMapsUrl+"?zoom=13&markers="+a[0]+","+a[1]+"&size=200x200"}}]),a}(),la=function(){function a(){e(this,a),this.dataType=g.Illustration}return f(a,[{key:"process",value:function(b){var i=d.Container.getCurrent().resolve(h),c=this.dataType.exec(b)[2],e=j.imageTypes[c],a=String();e||(a="The image of type '"+c+"' is not supported!"),e&&!e.map(function(a){return a.test(b)}).firstOrDefault()&&(a="An error occured while reading the image!");var f=document.createElement("img");f.src=a===String()?b:j.transparentGif,f.className="illustration",i.showCallToAction(g[this.dataType]+": "+c,f,a)}}]),a}(),ma=function(b){function a(){var c;e(this,a);for(var d=arguments.length,f=Array(d),b=0;d>b;b++)f[b]=arguments[b];var h=y(this,(c=Object.getPrototypeOf(a)).call.apply(c,[this].concat(f)));return h.dataType=g.MATMsg,h}return z(a,b),f(a,[{key:"process",value:function(b){var c=b.replace(this.dataType,String()),d=this.convertToMailto(c);Y(Object.getPrototypeOf(a.prototype),"process",this).call(this,d)}},{key:"convertToMailto",value:function(a){var b=r.matchBetweenKeyAndSemicolon("to",a),c=r.matchBetweenKeyAndSemicolon("cc",a),d=r.matchBetweenKeyAndSemicolon("bcc",a),e=r.matchBetweenKeyAndSemicolon("sub",a),f=r.matchBetweenKeyAndSemicolon("body",a);return"mailto:"+b+"?cc="+c+"&bcc="+d+"&subject="+e+"&body="+f}}]),a}(H),na=function(){function a(){e(this,a),this.dataType=g.WifiData}return f(a,[{key:"process",value:function(a){var c=d.Container.getCurrent().resolve(h),e=r.matchBetweenKeyAndSemicolon("S",a),f="nopass"!==r.matchBetweenKeyAndSemicolon("T",a).trim(),b=document.createElement("a");b.href=a,b.className="network",c.showCallToAction(g[this.dataType]+": '"+e+"'"+(f?" (Secure)":String()),b)}}]),a}(),oa=function(){function a(){e(this,a),this.dataType=g.PDF}return f(a,[{key:"process",value:function(b){var e=d.Container.getCurrent().resolve(h),c=String(),a=C.getDownloadElement("QR-PDF","pdf",b,"application/pdf");a.className="pdf",j.pdfBase.test(b)||(c="An error occured while reading the pdf!",a.href="#",a.target="_self",a.removeAttribute("download")),e.showCallToAction(""+g[this.dataType],a,c)}}]),a}(),pa=function(){function a(){e(this,a),this.dataType=g.PhoneCall}return f(a,[{key:"process",value:function(b){var c=d.Container.getCurrent().resolve(h),a=document.createElement("a");a.href=b,a.className="phoneCall",c.showCallToAction(""+g[this.dataType],a)}}]),a}(),qa=function(){function a(){e(this,a),this.dataType=g.RawFile}return f(a,[{key:"process",value:function(b){var c=d.Container.getCurrent().resolve(h),e=this.dataType.exec(b)[2],a=document.createElement("p");a.innerText="You've scanned a QR-Code containing a raw file wich is not supported (yet).",c.showCallToAction(" Raw file: "+e,a,"Not supported!")}}]),a}(),ra=function(){function a(){e(this,a),this.dataType=g.SMS}return f(a,[{key:"process",value:function(b){var c=d.Container.getCurrent().resolve(h),a=document.createElement("a");a.href=b,a.className="textMessage",c.showCallToAction(""+g[this.dataType],a)}}]),a}(),sa=function(){function a(){e(this,a),this.dataType=g.Text}return f(a,[{key:"process",value:function(b){var c=d.Container.getCurrent().resolve(h),a=document.createElement("textarea");a.value=b,a.readOnly=!0,c.showCallToAction(g[this.dataType],a)}}]),a}(),ta=function(){function a(){e(this,a),this.dataType=g.Url}return f(a,[{key:"process",value:function(a){var f=d.Container.getCurrent().resolve(h),e=String();j.invalidUrls.map(function(b){return b.indexOf(a)>-1||a.indexOf(b)>-1}).firstOrDefault()&&(e="Warning the url you've scanned is part of our blacklist!");var c=a.replace(/http(s)?:\/\//im,String()),i=c.length<=28?c:c.substr(0,25)+"...",b=document.createElement("a");b.href=a,b.target="_blank",b.className="url",f.showCallToAction(g[this.dataType]+": "+i,b,e)}}]),a}(),ua=function(){function a(){e(this,a),this.dataType=g.VCard}return f(a,[{key:"process",value:function(a){var e=d.Container.getCurrent().resolve(h),b=a.match(/(FN\:)(.*)/i)[2],c=C.getDownloadElement(b,"vcf",a);c.className="vCard",e.showCallToAction(g[this.dataType]+": "+b,c)}}]),a}(),va=function(){function a(){e(this,a),this.dataType=g.VEvent}return f(a,[{key:"process",value:function(b){var f=d.Container.getCurrent().resolve(h),a=b.match(/(SUMMARY\:)(.*)/i)[2],c=a.length<=10?a:a.substr(0,7)+"...",e=C.getDownloadElement(c,"ics",b);e.className="vEvent",f.showCallToAction(g[this.dataType]+": "+c,e)}}]),a}(),I=function(){function a(){e(this,a),this.dataProcessors=new Array}return f(a,[{key:"addDataProcessor",value:function(a){var b=g[a.dataType];return this.dataProcessors.push({key:b,dataProcessor:a}),this}},{key:"calculate",value:function(a){if(a=a.trim(),console.log("Raw QR-Data: "+a),"error decoding QR Code"===a)throw new TypeError("An error occured while decoding the QR-Code");var c=v.applicationContext;c.pauseCapture=!0;var d=q.toArray(g).firstOrDefault(function(b){return null!==g[b]&&g[b].test?g[b].test(a):!1}),b=this.dataProcessors.first(function(a){return a.key===d});if(!b)throw new ReferenceError("The processor for this dataType is missing!");var e=b.dataProcessor;e.process(a)}}]),a}(),J=function(){function a(){e(this,a),this.imageProcessors=new Array}return f(a,[{key:"addImageProcessor",value:function(a){return this.imageProcessors.push(a),this}},{key:"setDefaultImageProcessor",value:function(a){return this.defaultImageProcessor=a,this}},{key:"initiate",value:function(){if(!this.defaultImageProcessor)throw new ReferenceError("You need to set a default processor before instantiating, use: setDefaultImageProcessor(defaultImageProcessor: IImageProcessor)");for(var a=0;a<this.imageProcessors.length;a++){var c=this.imageProcessors[a],b=this.imageProcessors[a+1]||null;c.nextFallback=null!=b?b.initiate.bind(b):this.defaultImageProcessor.initiate.bind(this.defaultImageProcessor),c.declinedFallback=this.defaultImageProcessor.initiate.bind(this.defaultImageProcessor)}return this.imageProcessors[0].initiate(),this}}]),a}(),h=function(){function a(){e(this,a),this.tabManager=d.Container.getCurrent().resolve(x),this.popupManager=d.Container.getCurrent().resolve(A),this.title=document.querySelector("#callToAction .typeName"),this.invalidMessage=document.querySelector("#callToAction .invalidMessage"),this.actionContent=document.querySelector("#callToAction .actionContent")}return f(a,[{key:"showCallToAction",value:function(b,c){var a=arguments.length<=2||void 0===arguments[2]?String():arguments[2],d=a===String();this.tabManager.setActive("callToAction"),this.title.innerText=b,this.invalidMessage.innerText=a,this.actionContent.innerHTML=String(),this.actionContent.appendChild(c),this.actionContent.className=d?"actionContent":"actionContent invalid",this.popupManager.show(!1)}}]),a}(),A=function(){function a(){e(this,a),this.popupElement=document.body.querySelector("#popupCanvas"),this.popupHeader=this.popupElement.querySelector(".popupHeader"),this.popupContent=this.popupElement.querySelector(".popupContent"),this.okButton=this.popupElement.querySelector(".popupOK")}return f(a,[{key:"show",value:function(){var a=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],b=this,d=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],c=arguments.length<=2||void 0===arguments[2]?null:arguments[2],e=v.applicationContext;e.pauseCapture=!0,this.popupHeader.className=a?"popupHeader show":"popupHeader hide",this.popupContent.className=a?"popupContent":"popupContent large",this.okButton.disabled=!d,this.okButton.onclick=function(){c&&c(),b.hide.apply(b)},this.popupElement.className="opened",this.popupContent.scrollTop=0}},{key:"setButtonState",value:function(){var a=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this.okButton.disabled=!a}},{key:"hide",value:function(){this.okButton.onclick=function(){return!1},this.okButton.disabled=!0,this.popupElement.className="closed",this.popupHeader.className="popupHeader show",this.popupContent.className="popupContent";var a=v.applicationContext;a.pauseCapture=!1}}]),a}(),x=function(){function a(){e(this,a),this.tabMenu=document.querySelector("nav[role=navigation]"),this.menuItems=this.tabMenu.querySelectorAll("ul li"),this.tabElements=document.querySelectorAll(".tabSection");for(var b=0;b<this.menuItems.length;b++){var c=this.menuItems.item(b);c.onclick=this.setActive.bind(this,c.getAttribute("data-tab"))}}return f(a,[{key:"setActive",value:function(c){for(var a=0;a<this.menuItems.length;a++){var b=this.menuItems.item(a),d=b.getAttribute("data-tab"),e=d===c;b.className=e?"active":String(),document.querySelector("#"+d).className="tabSection"}for(var a=0;a<this.tabElements.length;a++){var b=this.tabElements.item(a),e=b.id===c;b.className=e?"tabSection active":"tabSection"}}}]),a}(),v=function(b){function a(){e(this,a);var b=y(this,Object.getPrototypeOf(a).call(this,"QR-Reader"));return b.pauseCapture=!1,b}return z(a,b),f(a,[{key:"register",value:function(a){a.register(A).setLifetimeScope(d.LifetimeScope.SingleInstance),a.register(x).setLifetimeScope(d.LifetimeScope.SingleInstance),a.register(h).setLifetimeScope(d.LifetimeScope.SingleInstance),a.register(J).setLifetimeScope(d.LifetimeScope.SingleInstance).setResolveFunc(function(a){return a.addImageProcessor(new ha).addImageProcessor(new ga).setDefaultImageProcessor(new ia)}),a.register(I).setLifetimeScope(d.LifetimeScope.SingleInstance).setResolveFunc(function(a){return a.addDataProcessor(new sa).addDataProcessor(new la).addDataProcessor(new oa).addDataProcessor(new qa).addDataProcessor(new ta).addDataProcessor(new ua).addDataProcessor(new ra).addDataProcessor(new pa).addDataProcessor(new ka).addDataProcessor(new va).addDataProcessor(new ma).addDataProcessor(new H).addDataProcessor(new na)}),this.initiate(a)}},{key:"initiate",value:function(a){this.imageProcessorFacade=a.resolve(J),this.dataProcessorFacade=a.resolve(I),w.getUserMedia({video:!0,audio:!1});var b=a.resolve(A),c=a.resolve(x),d=document.querySelector(".popupContent"),e="true"===(D.getCookie(j.agreedToTOA)||String());e?(b.setButtonState(!0),this.startApp(c,b)):this.setTOAPopup(b,c,d)}},{key:"setTOAPopup",value:function(b,d,a){var e=this,c=function(){(a.scrollHeight<=a.clientHeight||a.scrollTop>=a.scrollHeight-a.offsetHeight-a.scrollHeight/100)&&(b.setButtonState(!0),window.onresize=null,a.onscroll=null)};window.onresize=c,a.onscroll=c,d.setActive("toa"),b.show(!1,!1,function(){var a=new Date;a.setFullYear(a.getFullYear()+128),D.setCookie(j.agreedToTOA,!0,a),e.startApp(d,b),b.hide()}),c()}},{key:"qrCallback",value:function(b,c){var d=a.applicationContext;if(!d.pauseCapture)try{this.dataProcessorFacade.calculate(b)}catch(e){c(e.message)}}},{key:"startApp",value:function(a,b){var c=document.querySelector(".help");this.imageProcessorFacade.initiate(),c.onclick=function(){a.setActive("about"),b.show()}}}]),a}(d.ApplicationContext);window.onload=function(){return"https:"!==window.location.protocol&&ca.redirect(window.location.href.replace(/^(http(s)?:\/\/)(\s)?/i,"https://")),new v},P["true"]=Z}({},function(){return this}())}();
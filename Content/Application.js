/* A disclaimer will be written down here
 * stating the origin of the project and where the list of respective creits can be found.
 * Also: safety disclaimer.
 */!function(a,b){function c(a,b){this.count=a,this.dataCodewords=b,this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("DataCodewords",function(){return this.dataCodewords})}function d(a,b,c){this.ecCodewordsPerBlock=a,c?this.ecBlocks=new Array(b,c):this.ecBlocks=new Array(b),this.__defineGetter__("ECCodewordsPerBlock",function(){return this.ecCodewordsPerBlock}),this.__defineGetter__("TotalECCodewords",function(){return this.ecCodewordsPerBlock*this.NumBlocks}),this.__defineGetter__("NumBlocks",function(){for(var a=0,b=0;b<this.ecBlocks.length;b++)a+=this.ecBlocks[b].length;return a}),this.getECBlocks=function(){return this.ecBlocks}}function e(a,b,c,d,e,f){this.versionNumber=a,this.alignmentPatternCenters=b,this.ecBlocks=new Array(c,d,e,f);for(var g=0,h=c.ECCodewordsPerBlock,i=c.getECBlocks(),j=0;j<i.length;j++){var k=i[j];g+=k.Count*(k.DataCodewords+h)}this.totalCodewords=g,this.__defineGetter__("VersionNumber",function(){return this.versionNumber}),this.__defineGetter__("AlignmentPatternCenters",function(){return this.alignmentPatternCenters}),this.__defineGetter__("TotalCodewords",function(){return this.totalCodewords}),this.__defineGetter__("DimensionForVersion",function(){return 17+4*this.versionNumber}),this.buildFunctionPattern=function(){var a=this.DimensionForVersion,b=new l(a);b.setRegion(0,0,9,9),b.setRegion(a-8,0,8,9),b.setRegion(0,a-8,9,8);for(var c=this.alignmentPatternCenters.length,d=0;c>d;d++)for(var e=this.alignmentPatternCenters[d]-2,f=0;c>f;f++)0==d&&(0==f||f==c-1)||d==c-1&&0==f||b.setRegion(this.alignmentPatternCenters[f]-2,e,5,5);return b.setRegion(6,9,1,a-17),b.setRegion(9,6,a-17,1),this.versionNumber>6&&(b.setRegion(a-11,0,3,6),b.setRegion(0,a-11,6,3)),b},this.getECBlocksForLevel=function(a){return this.ecBlocks[a.ordinal()]}}function f(){return new Array(new e(1,new Array,new d(7,new c(1,19)),new d(10,new c(1,16)),new d(13,new c(1,13)),new d(17,new c(1,9))),new e(2,new Array(6,18),new d(10,new c(1,34)),new d(16,new c(1,28)),new d(22,new c(1,22)),new d(28,new c(1,16))),new e(3,new Array(6,22),new d(15,new c(1,55)),new d(26,new c(1,44)),new d(18,new c(2,17)),new d(22,new c(2,13))),new e(4,new Array(6,26),new d(20,new c(1,80)),new d(18,new c(2,32)),new d(26,new c(2,24)),new d(16,new c(4,9))),new e(5,new Array(6,30),new d(26,new c(1,108)),new d(24,new c(2,43)),new d(18,new c(2,15),new c(2,16)),new d(22,new c(2,11),new c(2,12))),new e(6,new Array(6,34),new d(18,new c(2,68)),new d(16,new c(4,27)),new d(24,new c(4,19)),new d(28,new c(4,15))),new e(7,new Array(6,22,38),new d(20,new c(2,78)),new d(18,new c(4,31)),new d(18,new c(2,14),new c(4,15)),new d(26,new c(4,13),new c(1,14))),new e(8,new Array(6,24,42),new d(24,new c(2,97)),new d(22,new c(2,38),new c(2,39)),new d(22,new c(4,18),new c(2,19)),new d(26,new c(4,14),new c(2,15))),new e(9,new Array(6,26,46),new d(30,new c(2,116)),new d(22,new c(3,36),new c(2,37)),new d(20,new c(4,16),new c(4,17)),new d(24,new c(4,12),new c(4,13))),new e(10,new Array(6,28,50),new d(18,new c(2,68),new c(2,69)),new d(26,new c(4,43),new c(1,44)),new d(24,new c(6,19),new c(2,20)),new d(28,new c(6,15),new c(2,16))),new e(11,new Array(6,30,54),new d(20,new c(4,81)),new d(30,new c(1,50),new c(4,51)),new d(28,new c(4,22),new c(4,23)),new d(24,new c(3,12),new c(8,13))),new e(12,new Array(6,32,58),new d(24,new c(2,92),new c(2,93)),new d(22,new c(6,36),new c(2,37)),new d(26,new c(4,20),new c(6,21)),new d(28,new c(7,14),new c(4,15))),new e(13,new Array(6,34,62),new d(26,new c(4,107)),new d(22,new c(8,37),new c(1,38)),new d(24,new c(8,20),new c(4,21)),new d(22,new c(12,11),new c(4,12))),new e(14,new Array(6,26,46,66),new d(30,new c(3,115),new c(1,116)),new d(24,new c(4,40),new c(5,41)),new d(20,new c(11,16),new c(5,17)),new d(24,new c(11,12),new c(5,13))),new e(15,new Array(6,26,48,70),new d(22,new c(5,87),new c(1,88)),new d(24,new c(5,41),new c(5,42)),new d(30,new c(5,24),new c(7,25)),new d(24,new c(11,12),new c(7,13))),new e(16,new Array(6,26,50,74),new d(24,new c(5,98),new c(1,99)),new d(28,new c(7,45),new c(3,46)),new d(24,new c(15,19),new c(2,20)),new d(30,new c(3,15),new c(13,16))),new e(17,new Array(6,30,54,78),new d(28,new c(1,107),new c(5,108)),new d(28,new c(10,46),new c(1,47)),new d(28,new c(1,22),new c(15,23)),new d(28,new c(2,14),new c(17,15))),new e(18,new Array(6,30,56,82),new d(30,new c(5,120),new c(1,121)),new d(26,new c(9,43),new c(4,44)),new d(28,new c(17,22),new c(1,23)),new d(28,new c(2,14),new c(19,15))),new e(19,new Array(6,30,58,86),new d(28,new c(3,113),new c(4,114)),new d(26,new c(3,44),new c(11,45)),new d(26,new c(17,21),new c(4,22)),new d(26,new c(9,13),new c(16,14))),new e(20,new Array(6,34,62,90),new d(28,new c(3,107),new c(5,108)),new d(26,new c(3,41),new c(13,42)),new d(30,new c(15,24),new c(5,25)),new d(28,new c(15,15),new c(10,16))),new e(21,new Array(6,28,50,72,94),new d(28,new c(4,116),new c(4,117)),new d(26,new c(17,42)),new d(28,new c(17,22),new c(6,23)),new d(30,new c(19,16),new c(6,17))),new e(22,new Array(6,26,50,74,98),new d(28,new c(2,111),new c(7,112)),new d(28,new c(17,46)),new d(30,new c(7,24),new c(16,25)),new d(24,new c(34,13))),new e(23,new Array(6,30,54,74,102),new d(30,new c(4,121),new c(5,122)),new d(28,new c(4,47),new c(14,48)),new d(30,new c(11,24),new c(14,25)),new d(30,new c(16,15),new c(14,16))),new e(24,new Array(6,28,54,80,106),new d(30,new c(6,117),new c(4,118)),new d(28,new c(6,45),new c(14,46)),new d(30,new c(11,24),new c(16,25)),new d(30,new c(30,16),new c(2,17))),new e(25,new Array(6,32,58,84,110),new d(26,new c(8,106),new c(4,107)),new d(28,new c(8,47),new c(13,48)),new d(30,new c(7,24),new c(22,25)),new d(30,new c(22,15),new c(13,16))),new e(26,new Array(6,30,58,86,114),new d(28,new c(10,114),new c(2,115)),new d(28,new c(19,46),new c(4,47)),new d(28,new c(28,22),new c(6,23)),new d(30,new c(33,16),new c(4,17))),new e(27,new Array(6,34,62,90,118),new d(30,new c(8,122),new c(4,123)),new d(28,new c(22,45),new c(3,46)),new d(30,new c(8,23),new c(26,24)),new d(30,new c(12,15),new c(28,16))),new e(28,new Array(6,26,50,74,98,122),new d(30,new c(3,117),new c(10,118)),new d(28,new c(3,45),new c(23,46)),new d(30,new c(4,24),new c(31,25)),new d(30,new c(11,15),new c(31,16))),new e(29,new Array(6,30,54,78,102,126),new d(30,new c(7,116),new c(7,117)),new d(28,new c(21,45),new c(7,46)),new d(30,new c(1,23),new c(37,24)),new d(30,new c(19,15),new c(26,16))),new e(30,new Array(6,26,52,78,104,130),new d(30,new c(5,115),new c(10,116)),new d(28,new c(19,47),new c(10,48)),new d(30,new c(15,24),new c(25,25)),new d(30,new c(23,15),new c(25,16))),new e(31,new Array(6,30,56,82,108,134),new d(30,new c(13,115),new c(3,116)),new d(28,new c(2,46),new c(29,47)),new d(30,new c(42,24),new c(1,25)),new d(30,new c(23,15),new c(28,16))),new e(32,new Array(6,34,60,86,112,138),new d(30,new c(17,115)),new d(28,new c(10,46),new c(23,47)),new d(30,new c(10,24),new c(35,25)),new d(30,new c(19,15),new c(35,16))),new e(33,new Array(6,30,58,86,114,142),new d(30,new c(17,115),new c(1,116)),new d(28,new c(14,46),new c(21,47)),new d(30,new c(29,24),new c(19,25)),new d(30,new c(11,15),new c(46,16))),new e(34,new Array(6,34,62,90,118,146),new d(30,new c(13,115),new c(6,116)),new d(28,new c(14,46),new c(23,47)),new d(30,new c(44,24),new c(7,25)),new d(30,new c(59,16),new c(1,17))),new e(35,new Array(6,30,54,78,102,126,150),new d(30,new c(12,121),new c(7,122)),new d(28,new c(12,47),new c(26,48)),new d(30,new c(39,24),new c(14,25)),new d(30,new c(22,15),new c(41,16))),new e(36,new Array(6,24,50,76,102,128,154),new d(30,new c(6,121),new c(14,122)),new d(28,new c(6,47),new c(34,48)),new d(30,new c(46,24),new c(10,25)),new d(30,new c(2,15),new c(64,16))),new e(37,new Array(6,28,54,80,106,132,158),new d(30,new c(17,122),new c(4,123)),new d(28,new c(29,46),new c(14,47)),new d(30,new c(49,24),new c(10,25)),new d(30,new c(24,15),new c(46,16))),new e(38,new Array(6,32,58,84,110,136,162),new d(30,new c(4,122),new c(18,123)),new d(28,new c(13,46),new c(32,47)),new d(30,new c(48,24),new c(14,25)),new d(30,new c(42,15),new c(32,16))),new e(39,new Array(6,26,54,82,110,138,166),new d(30,new c(20,117),new c(4,118)),new d(28,new c(40,47),new c(7,48)),new d(30,new c(43,24),new c(22,25)),new d(30,new c(10,15),new c(67,16))),new e(40,new Array(6,30,58,86,114,142,170),new d(30,new c(19,118),new c(6,119)),new d(28,new c(18,47),new c(31,48)),new d(30,new c(34,24),new c(34,25)),new d(30,new c(20,15),new c(61,16))))}function g(a,b,c,d,e,f,h,i,j){this.a11=a,this.a12=d,this.a13=h,this.a21=b,this.a22=e,this.a23=i,this.a31=c,this.a32=f,this.a33=j,this.transformPoints1=function(a){for(var b=a.length,c=this.a11,d=this.a12,e=this.a13,f=this.a21,g=this.a22,h=this.a23,i=this.a31,j=this.a32,k=this.a33,l=0;b>l;l+=2){var m=a[l],n=a[l+1],o=e*m+h*n+k;a[l]=(c*m+f*n+i)/o,a[l+1]=(d*m+g*n+j)/o}},this.transformPoints2=function(a,b){for(var c=a.length,d=0;c>d;d++){var e=a[d],f=b[d],g=this.a13*e+this.a23*f+this.a33;a[d]=(this.a11*e+this.a21*f+this.a31)/g,b[d]=(this.a12*e+this.a22*f+this.a32)/g}},this.buildAdjoint=function(){return new g(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},this.times=function(a){return new g(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)}}function h(a,b){this.bits=a,this.points=b}function i(a){this.image=a,this.resultPointCallback=null,this.sizeOfBlackWhiteBlackRun=function(a,b,c,d){var e=Math.abs(d-b)>Math.abs(c-a);if(e){var f=a;a=b,b=f,f=c,c=d,d=f}for(var g=Math.abs(c-a),h=Math.abs(d-b),i=-g>>1,j=d>b?1:-1,k=c>a?1:-1,l=0,m=a,n=b;m!=c;m+=k){var o=e?n:m,p=e?m:n;if(1==l?this.image[o+p*qrcode.width]&&l++:this.image[o+p*qrcode.width]||l++,3==l){var q=m-a,r=n-b;return Math.sqrt(q*q+r*r)}if(i+=h,i>0){if(n==d)break;n+=j,i-=g}}var s=c-a,t=d-b;return Math.sqrt(s*s+t*t)},this.sizeOfBlackWhiteBlackRunBothWays=function(a,b,c,d){var e=this.sizeOfBlackWhiteBlackRun(a,b,c,d),f=1,g=a-(c-a);0>g?(f=a/(a-g),g=0):g>=qrcode.width&&(f=(qrcode.width-1-a)/(g-a),g=qrcode.width-1);var h=Math.floor(b-(d-b)*f);return f=1,0>h?(f=b/(b-h),h=0):h>=qrcode.height&&(f=(qrcode.height-1-b)/(h-b),h=qrcode.height-1),g=Math.floor(a+(g-a)*f),e+=this.sizeOfBlackWhiteBlackRun(a,b,g,h),e-1},this.calculateModuleSizeOneWay=function(a,b){var c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.X),Math.floor(a.Y),Math.floor(b.X),Math.floor(b.Y)),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(b.X),Math.floor(b.Y),Math.floor(a.X),Math.floor(a.Y));return isNaN(c)?d/7:isNaN(d)?c/7:(c+d)/14},this.calculateModuleSize=function(a,b,c){return(this.calculateModuleSizeOneWay(a,b)+this.calculateModuleSizeOneWay(a,c))/2},this.distance=function(a,b){return xDiff=a.X-b.X,yDiff=a.Y-b.Y,Math.sqrt(xDiff*xDiff+yDiff*yDiff)},this.computeDimension=function(a,b,c,d){var e=Math.round(this.distance(a,b)/d),f=Math.round(this.distance(a,c)/d),g=(e+f>>1)+7;switch(3&g){case 0:g++;break;case 2:g--;break;case 3:throw"Error"}return g},this.findAlignmentInRegion=function(a,b,c,d){var e=Math.floor(d*a),f=Math.max(0,b-e),g=Math.min(qrcode.width-1,b+e);if(3*a>g-f)throw"Error";var h=Math.max(0,c-e),i=Math.min(qrcode.height-1,c+e),j=new F(this.image,f,h,g-f,i-h,a,this.resultPointCallback);return j.find()},this.createTransform=function(a,b,c,d,e){var f,h,i,j,k=e-3.5;null!=d?(f=d.X,h=d.Y,i=j=k-3):(f=b.X-a.X+c.X,h=b.Y-a.Y+c.Y,i=j=k);var l=g.quadrilateralToQuadrilateral(3.5,3.5,k,3.5,i,j,3.5,k,a.X,a.Y,b.X,b.Y,f,h,c.X,c.Y);return l},this.sampleGrid=function(a,b,c){var d=GridSampler;return d.sampleGrid3(a,c,b)},this.processFinderPatternInfo=function(a){var b=a.TopLeft,c=a.TopRight,d=a.BottomLeft,f=this.calculateModuleSize(b,c,d);if(1>f)throw"Error";var g=this.computeDimension(b,c,d,f),i=e.getProvisionalVersionForDimension(g),j=i.DimensionForVersion-7,k=null;if(i.AlignmentPatternCenters.length>0)for(var l=c.X-b.X+d.X,m=c.Y-b.Y+d.Y,n=1-3/j,o=Math.floor(b.X+n*(l-b.X)),p=Math.floor(b.Y+n*(m-b.Y)),q=4;16>=q;q<<=1){k=this.findAlignmentInRegion(f,o,p,q);break}var r,s=this.createTransform(b,c,d,k,g),t=this.sampleGrid(this.image,s,g);return r=null==k?new Array(d,b,c):new Array(d,b,c,k),new h(t,r)},this.detect=function(){var a=(new D).findFinderPattern(this.image);return this.processFinderPatternInfo(a)}}function j(a){this.errorCorrectionLevel=k.forBits(a>>3&3),this.dataMask=7&a,this.__defineGetter__("ErrorCorrectionLevel",function(){return this.errorCorrectionLevel}),this.__defineGetter__("DataMask",function(){return this.dataMask}),this.GetHashCode=function(){return this.errorCorrectionLevel.ordinal()<<3|dataMask},this.Equals=function(a){var b=a;return this.errorCorrectionLevel==b.errorCorrectionLevel&&this.dataMask==b.dataMask}}function k(a,b,c){this.ordinal_Renamed_Field=a,this.bits=b,this.name=c,this.__defineGetter__("Bits",function(){return this.bits}),this.__defineGetter__("Name",function(){return this.name}),this.ordinal=function(){return this.ordinal_Renamed_Field}}function l(a,b){if(b||(b=a),1>a||1>b)throw"Both dimensions must be greater than 0";this.width=a,this.height=b;var c=a>>5;0!=(31&a)&&c++,this.rowSize=c,this.bits=new Array(c*b);for(var d=0;d<this.bits.length;d++)this.bits[d]=0;this.__defineGetter__("Width",function(){return this.width}),this.__defineGetter__("Height",function(){return this.height}),this.__defineGetter__("Dimension",function(){if(this.width!=this.height)throw"Can't call getDimension() on a non-square matrix";return this.width}),this.get_Renamed=function(a,b){var c=b*this.rowSize+(a>>5);return 0!=(1&A(this.bits[c],31&a))},this.set_Renamed=function(a,b){var c=b*this.rowSize+(a>>5);this.bits[c]|=1<<(31&a)},this.flip=function(a,b){var c=b*this.rowSize+(a>>5);this.bits[c]^=1<<(31&a)},this.clear=function(){for(var a=this.bits.length,b=0;a>b;b++)this.bits[b]=0},this.setRegion=function(a,b,c,d){if(0>b||0>a)throw"Left and top must be nonnegative";if(1>d||1>c)throw"Height and width must be at least 1";var e=a+c,f=b+d;if(f>this.height||e>this.width)throw"The region must fit inside the matrix";for(var g=b;f>g;g++)for(var h=g*this.rowSize,i=a;e>i;i++)this.bits[h+(i>>5)]|=1<<(31&i)}}function m(a,b){this.numDataCodewords=a,this.codewords=b,this.__defineGetter__("NumDataCodewords",function(){return this.numDataCodewords}),this.__defineGetter__("Codewords",function(){return this.codewords})}function n(a){var b=a.Dimension;if(21>b||1!=(3&b))throw"Error BitMatrixParser";this.bitMatrix=a,this.parsedVersion=null,this.parsedFormatInfo=null,this.copyBit=function(a,b,c){return this.bitMatrix.get_Renamed(a,b)?c<<1|1:c<<1},this.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var a=0,b=0;6>b;b++)a=this.copyBit(b,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(var c=5;c>=0;c--)a=this.copyBit(8,c,a);if(this.parsedFormatInfo=j.decodeFormatInformation(a),null!=this.parsedFormatInfo)return this.parsedFormatInfo;var d=this.bitMatrix.Dimension;a=0;for(var e=d-8,b=d-1;b>=e;b--)a=this.copyBit(b,8,a);for(var c=d-7;d>c;c++)a=this.copyBit(8,c,a);if(this.parsedFormatInfo=j.decodeFormatInformation(a),null!=this.parsedFormatInfo)return this.parsedFormatInfo;throw"Error readFormatInformation"},this.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var a=this.bitMatrix.Dimension,b=a-17>>2;if(6>=b)return e.getVersionForNumber(b);for(var c=0,d=a-11,f=5;f>=0;f--)for(var g=a-9;g>=d;g--)c=this.copyBit(g,f,c);if(this.parsedVersion=e.decodeVersionInformation(c),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==a)return this.parsedVersion;c=0;for(var g=5;g>=0;g--)for(var f=a-9;f>=d;f--)c=this.copyBit(g,f,c);if(this.parsedVersion=e.decodeVersionInformation(c),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==a)return this.parsedVersion;throw"Error readVersion"},this.readCodewords=function(){var a=this.readFormatInformation(),b=this.readVersion(),c=DataMask.forReference(a.DataMask),d=this.bitMatrix.Dimension;c.unmaskBitMatrix(this.bitMatrix,d);for(var e=b.buildFunctionPattern(),f=!0,g=new Array(b.TotalCodewords),h=0,i=0,j=0,k=d-1;k>0;k-=2){6==k&&k--;for(var l=0;d>l;l++)for(var m=f?d-1-l:l,n=0;2>n;n++)e.get_Renamed(k-n,m)||(j++,i<<=1,this.bitMatrix.get_Renamed(k-n,m)&&(i|=1),8==j&&(g[h++]=i,j=0,i=0));f^=!0}if(h!=b.TotalCodewords)throw"Error readCodewords";return g}}function o(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==(a+b&1)}}function q(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==(1&a)}}function r(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return b%3==0}}function s(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return(a+b)%3==0}}function t(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==(A(a,1)+b/3&1)}}function u(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){var c=a*b;return(1&c)+c%3==0}}function v(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){var c=a*b;return 0==((1&c)+c%3&1)}}function w(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==((a+b&1)+a*b%3&1)}}function x(a){this.field=a,this.decode=function(a,b){for(var c=new y(this.field,a),d=new Array(b),e=0;e<d.length;e++)d[e]=0;for(var f=!1,g=!0,e=0;b>e;e++){var h=c.evaluateAt(this.field.exp(f?e+1:e));d[d.length-1-e]=h,0!=h&&(g=!1)}if(!g)for(var i=new y(this.field,d),j=this.runEuclideanAlgorithm(this.field.buildMonomial(b,1),i,b),k=j[0],l=j[1],m=this.findErrorLocations(k),n=this.findErrorMagnitudes(l,m,f),e=0;e<m.length;e++){var o=a.length-1-this.field.log(m[e]);if(0>o)throw"ReedSolomonException Bad error location";a[o]=z.addOrSubtract(a[o],n[e])}},this.runEuclideanAlgorithm=function(a,b,c){if(a.Degree<b.Degree){var d=a;a=b,b=d}for(var e=a,f=b,g=this.field.One,h=this.field.Zero,i=this.field.Zero,j=this.field.One;f.Degree>=Math.floor(c/2);){var k=e,l=g,m=i;if(e=f,g=h,i=j,e.Zero)throw"r_{i-1} was zero";f=k;for(var n=this.field.Zero,o=e.getCoefficient(e.Degree),p=this.field.inverse(o);f.Degree>=e.Degree&&!f.Zero;){var q=f.Degree-e.Degree,r=this.field.multiply(f.getCoefficient(f.Degree),p);n=n.addOrSubtract(this.field.buildMonomial(q,r)),f=f.addOrSubtract(e.multiplyByMonomial(q,r))}h=n.multiply1(g).addOrSubtract(l),j=n.multiply1(i).addOrSubtract(m)}var s=j.getCoefficient(0);if(0==s)throw"ReedSolomonException sigmaTilde(0) was zero";var t=this.field.inverse(s),u=j.multiply2(t),v=f.multiply2(t);return new Array(u,v)},this.findErrorLocations=function(a){var b=a.Degree;if(1==b)return new Array(a.getCoefficient(1));for(var c=new Array(b),d=0,e=1;256>e&&b>d;e++)0==a.evaluateAt(e)&&(c[d]=this.field.inverse(e),d++);if(d!=b)throw"Error locator degree does not match number of roots";return c},this.findErrorMagnitudes=function(a,b,c){for(var d=b.length,e=new Array(d),f=0;d>f;f++){for(var g=this.field.inverse(b[f]),h=1,i=0;d>i;i++)f!=i&&(h=this.field.multiply(h,z.addOrSubtract(1,this.field.multiply(b[i],g))));e[f]=this.field.multiply(a.evaluateAt(g),this.field.inverse(h)),c&&(e[f]=this.field.multiply(e[f],g))}return e}}function y(a,b){if(null==b||0==b.length)throw"System.ArgumentException";this.field=a;var c=b.length;if(c>1&&0==b[0]){for(var d=1;c>d&&0==b[d];)d++;if(d==c)this.coefficients=a.Zero.coefficients;else{this.coefficients=new Array(c-d);for(var e=0;e<this.coefficients.length;e++)this.coefficients[e]=0;for(var f=0;f<this.coefficients.length;f++)this.coefficients[f]=b[d+f]}}else this.coefficients=b;this.__defineGetter__("Zero",function(){return 0==this.coefficients[0]}),this.__defineGetter__("Degree",function(){return this.coefficients.length-1}),this.__defineGetter__("Coefficients",function(){return this.coefficients}),this.getCoefficient=function(a){return this.coefficients[this.coefficients.length-1-a]},this.evaluateAt=function(a){if(0==a)return this.getCoefficient(0);var b=this.coefficients.length;if(1==a){for(var c=0,d=0;b>d;d++)c=z.addOrSubtract(c,this.coefficients[d]);return c}for(var e=this.coefficients[0],d=1;b>d;d++)e=z.addOrSubtract(this.field.multiply(a,e),this.coefficients[d]);return e},this.addOrSubtract=function(b){if(this.field!=b.field)throw"GF256Polys do not have same GF256 field";if(this.Zero)return b;if(b.Zero)return this;var c=this.coefficients,d=b.coefficients;if(c.length>d.length){var e=c;c=d,d=e}for(var f=new Array(d.length),g=d.length-c.length,h=0;g>h;h++)f[h]=d[h];for(var i=g;i<d.length;i++)f[i]=z.addOrSubtract(c[i-g],d[i]);return new y(a,f)},this.multiply1=function(a){if(this.field!=a.field)throw"GF256Polys do not have same GF256 field";if(this.Zero||a.Zero)return this.field.Zero;for(var b=this.coefficients,c=b.length,d=a.coefficients,e=d.length,f=new Array(c+e-1),g=0;c>g;g++)for(var h=b[g],i=0;e>i;i++)f[g+i]=z.addOrSubtract(f[g+i],this.field.multiply(h,d[i]));return new y(this.field,f)},this.multiply2=function(a){if(0==a)return this.field.Zero;if(1==a)return this;for(var b=this.coefficients.length,c=new Array(b),d=0;b>d;d++)c[d]=this.field.multiply(this.coefficients[d],a);return new y(this.field,c)},this.multiplyByMonomial=function(a,b){if(0>a)throw"System.ArgumentException";if(0==b)return this.field.Zero;for(var c=this.coefficients.length,d=new Array(c+a),e=0;e<d.length;e++)d[e]=0;for(var e=0;c>e;e++)d[e]=this.field.multiply(this.coefficients[e],b);return new y(this.field,d)},this.divide=function(a){if(this.field!=a.field)throw"GF256Polys do not have same GF256 field";if(a.Zero)throw"Divide by 0";for(var b=this.field.Zero,c=this,d=a.getCoefficient(a.Degree),e=this.field.inverse(d);c.Degree>=a.Degree&&!c.Zero;){var f=c.Degree-a.Degree,g=this.field.multiply(c.getCoefficient(c.Degree),e),h=a.multiplyByMonomial(f,g),i=this.field.buildMonomial(f,g);b=b.addOrSubtract(i),c=c.addOrSubtract(h)}return new Array(b,c)}}function z(a){this.expTable=new Array(256),this.logTable=new Array(256);for(var b=1,c=0;256>c;c++)this.expTable[c]=b,b<<=1,b>=256&&(b^=a);for(var c=0;255>c;c++)this.logTable[this.expTable[c]]=c;var d=new Array(1);d[0]=0,this.zero=new y(this,new Array(d));var e=new Array(1);e[0]=1,this.one=new y(this,new Array(e)),this.__defineGetter__("Zero",function(){return this.zero}),this.__defineGetter__("One",function(){return this.one}),this.buildMonomial=function(a,b){if(0>a)throw"System.ArgumentException";if(0==b)return zero;for(var c=new Array(a+1),d=0;d<c.length;d++)c[d]=0;return c[0]=b,new y(this,c)},this.exp=function(a){return this.expTable[a]},this.log=function(a){if(0==a)throw"System.ArgumentException";return this.logTable[a]},this.inverse=function(a){if(0==a)throw"System.ArithmeticException";return this.expTable[255-this.logTable[a]]},this.multiply=function(a,b){return 0==a||0==b?0:1==a?b:1==b?a:this.expTable[(this.logTable[a]+this.logTable[b])%255]}}function A(a,b){return a>=0?a>>b:(a>>b)+(2<<~b)}function B(a,b,c){this.x=a,this.y=b,this.count=1,this.estimatedModuleSize=c,this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return this.x}),this.__defineGetter__("Y",function(){return this.y}),this.incrementCount=function(){this.count++},this.aboutEquals=function(a,b,c){if(Math.abs(b-this.y)<=a&&Math.abs(c-this.x)<=a){var d=Math.abs(a-this.estimatedModuleSize);return 1>=d||d/this.estimatedModuleSize<=1}return!1}}function C(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2],this.__defineGetter__("BottomLeft",function(){return this.bottomLeft}),this.__defineGetter__("TopLeft",function(){return this.topLeft}),this.__defineGetter__("TopRight",function(){return this.topRight})}function D(){this.image=null,this.possibleCenters=[],this.hasSkipped=!1,this.crossCheckStateCount=new Array(0,0,0,0,0),this.resultPointCallback=null,this.__defineGetter__("CrossCheckStateCount",function(){return this.crossCheckStateCount[0]=0,this.crossCheckStateCount[1]=0,this.crossCheckStateCount[2]=0,this.crossCheckStateCount[3]=0,this.crossCheckStateCount[4]=0,this.crossCheckStateCount}),this.foundPatternCross=function(a){for(var b=0,c=0;5>c;c++){var d=a[c];if(0==d)return!1;b+=d}if(7>b)return!1;var e=Math.floor((b<<R)/7),f=Math.floor(e/2);return Math.abs(e-(a[0]<<R))<f&&Math.abs(e-(a[1]<<R))<f&&Math.abs(3*e-(a[2]<<R))<3*f&&Math.abs(e-(a[3]<<R))<f&&Math.abs(e-(a[4]<<R))<f},this.centerFromEnd=function(a,b){return b-a[4]-a[3]-a[2]/2},this.crossCheckVertical=function(a,b,c,d){for(var e=this.image,f=qrcode.height,g=this.CrossCheckStateCount,h=a;h>=0&&e[b+h*qrcode.width];)g[2]++,h--;if(0>h)return NaN;for(;h>=0&&!e[b+h*qrcode.width]&&g[1]<=c;)g[1]++,h--;if(0>h||g[1]>c)return NaN;for(;h>=0&&e[b+h*qrcode.width]&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;f>h&&e[b+h*qrcode.width];)g[2]++,h++;if(h==f)return NaN;for(;f>h&&!e[b+h*qrcode.width]&&g[3]<c;)g[3]++,h++;if(h==f||g[3]>=c)return NaN;for(;f>h&&e[b+h*qrcode.width]&&g[4]<c;)g[4]++,h++;if(g[4]>=c)return NaN;var i=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(i-d)>=2*d?NaN:this.foundPatternCross(g)?this.centerFromEnd(g,h):NaN},this.crossCheckHorizontal=function(a,b,c,d){for(var e=this.image,f=qrcode.width,g=this.CrossCheckStateCount,h=a;h>=0&&e[h+b*qrcode.width];)g[2]++,h--;if(0>h)return NaN;for(;h>=0&&!e[h+b*qrcode.width]&&g[1]<=c;)g[1]++,h--;if(0>h||g[1]>c)return NaN;for(;h>=0&&e[h+b*qrcode.width]&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;f>h&&e[h+b*qrcode.width];)g[2]++,h++;if(h==f)return NaN;for(;f>h&&!e[h+b*qrcode.width]&&g[3]<c;)g[3]++,h++;if(h==f||g[3]>=c)return NaN;for(;f>h&&e[h+b*qrcode.width]&&g[4]<c;)g[4]++,h++;if(g[4]>=c)return NaN;var i=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(i-d)>=d?NaN:this.foundPatternCross(g)?this.centerFromEnd(g,h):NaN},this.handlePossibleCenter=function(a,b,c){var d=a[0]+a[1]+a[2]+a[3]+a[4],e=this.centerFromEnd(a,c),f=this.crossCheckVertical(b,Math.floor(e),a[2],d);if(!isNaN(f)&&(e=this.crossCheckHorizontal(Math.floor(e),Math.floor(f),a[2],d),!isNaN(e))){for(var g=d/7,h=!1,i=this.possibleCenters.length,j=0;i>j;j++){var k=this.possibleCenters[j];if(k.aboutEquals(g,f,e)){k.incrementCount(),h=!0;break}}if(!h){var l=new B(e,f,g);this.possibleCenters.push(l),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(l)}return!0}return!1},this.selectBestPatterns=function(){var a=this.possibleCenters.length;if(3>a)throw"Couldn't find enough finder patterns";if(a>3){for(var b=0,c=0,d=0;a>d;d++){var e=this.possibleCenters[d].EstimatedModuleSize;b+=e,c+=e*e}var f=b/a;this.possibleCenters.sort(function(a,b){var c=Math.abs(b.EstimatedModuleSize-f),d=Math.abs(a.EstimatedModuleSize-f);return d>c?-1:c==d?0:1});for(var g=Math.sqrt(c/a-f*f),h=Math.max(.2*f,g),d=0;d<this.possibleCenters.length&&this.possibleCenters.length>3;d++){var i=this.possibleCenters[d];Math.abs(i.EstimatedModuleSize-f)>h&&(this.possibleCenters.remove(d),d--)}}return this.possibleCenters.length>3&&this.possibleCenters.sort(function(a,b){return a.count>b.count?-1:a.count<b.count?1:0}),new Array(this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2])},this.findRowSkip=function(){var a=this.possibleCenters.length;if(1>=a)return 0;for(var b=null,c=0;a>c;c++){var d=this.possibleCenters[c];if(d.Count>=S){if(null!=b)return this.hasSkipped=!0,Math.floor((Math.abs(b.X-d.X)-Math.abs(b.Y-d.Y))/2);b=d}}return 0},this.haveMultiplyConfirmedCenters=function(){for(var a=0,b=0,c=this.possibleCenters.length,d=0;c>d;d++){var e=this.possibleCenters[d];e.Count>=S&&(a++,b+=e.EstimatedModuleSize)}if(3>a)return!1;for(var f=b/c,g=0,d=0;c>d;d++)e=this.possibleCenters[d],g+=Math.abs(e.EstimatedModuleSize-f);return.05*b>=g},this.findFinderPattern=function(a){var b=!1;this.image=a;var c=qrcode.height,d=qrcode.width,e=Math.floor(3*c/(4*Q));(P>e||b)&&(e=P);for(var f=!1,g=new Array(5),h=e-1;c>h&&!f;h+=e){g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0;for(var i=0,j=0;d>j;j++)if(a[j+h*qrcode.width])1==(1&i)&&i++,g[i]++;else if(0==(1&i))if(4==i)if(this.foundPatternCross(g)){var k=this.handlePossibleCenter(g,h,j);if(k)if(e=2,this.hasSkipped)f=this.haveMultiplyConfirmedCenters();else{var l=this.findRowSkip();l>g[2]&&(h+=l-g[2]-e,j=d-1)}else{do j++;while(d>j&&!a[j+h*qrcode.width]);j--}i=0,g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0}else g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,i=3;else g[++i]++;else g[i]++;if(this.foundPatternCross(g)){var k=this.handlePossibleCenter(g,h,d);k&&(e=g[0],this.hasSkipped&&(f=haveMultiplyConfirmedCenters()))}}var m=this.selectBestPatterns();return qrcode.orderBestPatterns(m),new C(m)}}function E(a,b,c){this.x=a,this.y=b,this.count=1,this.estimatedModuleSize=c,this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return Math.floor(this.x)}),this.__defineGetter__("Y",function(){return Math.floor(this.y)}),this.incrementCount=function(){this.count++},this.aboutEquals=function(a,b,c){if(Math.abs(b-this.y)<=a&&Math.abs(c-this.x)<=a){var d=Math.abs(a-this.estimatedModuleSize);return 1>=d||d/this.estimatedModuleSize<=1}return!1}}function F(a,b,c,d,e,f,g){this.image=a,this.possibleCenters=new Array,this.startX=b,this.startY=c,this.width=d,this.height=e,this.moduleSize=f,this.crossCheckStateCount=new Array(0,0,0),this.resultPointCallback=g,this.centerFromEnd=function(a,b){return b-a[2]-a[1]/2},this.foundPatternCross=function(a){for(var b=this.moduleSize,c=b/2,d=0;3>d;d++)if(Math.abs(b-a[d])>=c)return!1;return!0},this.crossCheckVertical=function(a,b,c,d){var e=this.image,f=qrcode.height,g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;for(var h=a;h>=0&&e[b+h*qrcode.width]&&g[1]<=c;)g[1]++,h--;if(0>h||g[1]>c)return NaN;for(;h>=0&&!e[b+h*qrcode.width]&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;f>h&&e[b+h*qrcode.width]&&g[1]<=c;)g[1]++,h++;if(h==f||g[1]>c)return NaN;for(;f>h&&!e[b+h*qrcode.width]&&g[2]<=c;)g[2]++,h++;if(g[2]>c)return NaN;var i=g[0]+g[1]+g[2];return 5*Math.abs(i-d)>=2*d?NaN:this.foundPatternCross(g)?this.centerFromEnd(g,h):NaN},this.handlePossibleCenter=function(a,b,c){var d=a[0]+a[1]+a[2],e=this.centerFromEnd(a,c),f=this.crossCheckVertical(b,Math.floor(e),2*a[1],d);if(!isNaN(f)){for(var g=(a[0]+a[1]+a[2])/3,h=this.possibleCenters.length,i=0;h>i;i++){var j=this.possibleCenters[i];if(j.aboutEquals(g,f,e))return new E(e,f,g)}var k=new E(e,f,g);this.possibleCenters.push(k),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(k)}return null},this.find=function(){for(var b=this.startX,e=this.height,f=b+d,g=c+(e>>1),h=new Array(0,0,0),i=0;e>i;i++){var j=g+(0==(1&i)?i+1>>1:-(i+1>>1));h[0]=0,h[1]=0,h[2]=0;for(var k=b;f>k&&!a[k+qrcode.width*j];)k++;for(var l=0;f>k;){if(a[k+j*qrcode.width])if(1==l)h[l]++;else if(2==l){if(this.foundPatternCross(h)){var m=this.handlePossibleCenter(h,j,k);if(null!=m)return m}h[0]=h[2],h[1]=1,h[2]=0,l=1}else h[++l]++;else 1==l&&l++,h[l]++;k++}if(this.foundPatternCross(h)){var m=this.handlePossibleCenter(h,j,f);if(null!=m)return m}}if(0!=this.possibleCenters.length)return this.possibleCenters[0];
throw"Couldn't find enough alignment patterns"}}function G(a,b,c){this.blockPointer=0,this.bitPointer=7,this.dataLength=0,this.blocks=a,this.numErrorCorrectionCode=c,9>=b?this.dataLengthMode=0:b>=10&&26>=b?this.dataLengthMode=1:b>=27&&40>=b&&(this.dataLengthMode=2),this.getNextBits=function(a){var b=0;if(a<this.bitPointer+1){for(var c=0,d=0;a>d;d++)c+=1<<d;return c<<=this.bitPointer-a+1,b=(this.blocks[this.blockPointer]&c)>>this.bitPointer-a+1,this.bitPointer-=a,b}if(a<this.bitPointer+1+8){for(var e=0,d=0;d<this.bitPointer+1;d++)e+=1<<d;return b=(this.blocks[this.blockPointer]&e)<<a-(this.bitPointer+1),this.blockPointer++,b+=this.blocks[this.blockPointer]>>8-(a-(this.bitPointer+1)),this.bitPointer=this.bitPointer-a%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),b}if(a<this.bitPointer+1+16){for(var e=0,f=0,d=0;d<this.bitPointer+1;d++)e+=1<<d;var g=(this.blocks[this.blockPointer]&e)<<a-(this.bitPointer+1);this.blockPointer++;var h=this.blocks[this.blockPointer]<<a-(this.bitPointer+1+8);this.blockPointer++;for(var d=0;d<a-(this.bitPointer+1+8);d++)f+=1<<d;f<<=8-(a-(this.bitPointer+1+8));var i=(this.blocks[this.blockPointer]&f)>>8-(a-(this.bitPointer+1+8));return b=g+h+i,this.bitPointer=this.bitPointer-(a-8)%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),b}return 0},this.NextMode=function(){return this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2?0:this.getNextBits(4)},this.getDataLength=function(a){for(var b=0;;){if(a>>b==1)break;b++}return this.getNextBits(qrcode.sizeOfDataLengthInfo[this.dataLengthMode][b])},this.getRomanAndFigureString=function(a){var b=a,c=0,d="",e=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":");do if(b>1){c=this.getNextBits(11);var f=Math.floor(c/45),g=c%45;d+=e[f],d+=e[g],b-=2}else 1==b&&(c=this.getNextBits(6),d+=e[c],b-=1);while(b>0);return d},this.getFigureString=function(a){var b=a,c=0,d="";do b>=3?(c=this.getNextBits(10),100>c&&(d+="0"),10>c&&(d+="0"),b-=3):2==b?(c=this.getNextBits(7),10>c&&(d+="0"),b-=2):1==b&&(c=this.getNextBits(4),b-=1),d+=c;while(b>0);return d},this.get8bitByteArray=function(a){var b=a,c=0,d=new Array;do c=this.getNextBits(8),d.push(c),b--;while(b>0);return d},this.getKanjiString=function(a){var b=a,c=0,d="";do{c=getNextBits(13);var e=c%192,f=c/192,g=(f<<8)+e,h=0;h=40956>=g+33088?g+33088:g+49472,d+=String.fromCharCode(h),b--}while(b>0);return d},this.__defineGetter__("DataByte",function(){for(var a=new Array,b=1,c=2,d=4,e=8;;){var f=this.NextMode();if(0==f){if(a.length>0)break;throw"Empty data block"}if(f!=b&&f!=c&&f!=d&&f!=e)throw"Invalid mode: "+f+" in (block:"+this.blockPointer+" bit:"+this.bitPointer+")";if(dataLength=this.getDataLength(f),dataLength<1)throw"Invalid data length: "+dataLength;switch(f){case b:for(var g=this.getFigureString(dataLength),h=new Array(g.length),i=0;i<g.length;i++)h[i]=g.charCodeAt(i);a.push(h);break;case c:for(var g=this.getRomanAndFigureString(dataLength),h=new Array(g.length),i=0;i<g.length;i++)h[i]=g.charCodeAt(i);a.push(h);break;case d:var j=this.get8bitByteArray(dataLength);a.push(j);break;case e:var g=this.getKanjiString(dataLength);a.push(g)}}return a})}GridSampler={},GridSampler.checkAndNudgePoints=function(a,b){for(var c=qrcode.width,d=qrcode.height,e=!0,f=0;f<b.length&&e;f+=2){var g=Math.floor(b[f]),h=Math.floor(b[f+1]);if(-1>g||g>c||-1>h||h>d)throw"Error.checkAndNudgePoints ";e=!1,-1==g?(b[f]=0,e=!0):g==c&&(b[f]=c-1,e=!0),-1==h?(b[f+1]=0,e=!0):h==d&&(b[f+1]=d-1,e=!0)}e=!0;for(var f=b.length-2;f>=0&&e;f-=2){var g=Math.floor(b[f]),h=Math.floor(b[f+1]);if(-1>g||g>c||-1>h||h>d)throw"Error.checkAndNudgePoints ";e=!1,-1==g?(b[f]=0,e=!0):g==c&&(b[f]=c-1,e=!0),-1==h?(b[f+1]=0,e=!0):h==d&&(b[f+1]=d-1,e=!0)}},GridSampler.sampleGrid3=function(a,b,c){for(var d=new l(b),e=new Array(b<<1),f=0;b>f;f++){for(var g=e.length,h=f+.5,i=0;g>i;i+=2)e[i]=(i>>1)+.5,e[i+1]=h;c.transformPoints1(e),GridSampler.checkAndNudgePoints(a,e);try{for(var i=0;g>i;i+=2){var j=4*Math.floor(e[i])+Math.floor(e[i+1])*qrcode.width*4,k=a[Math.floor(e[i])+qrcode.width*Math.floor(e[i+1])];qrcode.imagedata.data[j]=k?255:0,qrcode.imagedata.data[j+1]=k?255:0,qrcode.imagedata.data[j+2]=0,qrcode.imagedata.data[j+3]=255,k&&d.set_Renamed(i>>1,f)}}catch(m){throw"Error.checkAndNudgePoints"}}return d},GridSampler.sampleGridx=function(a,b,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s){var t=g.quadrilateralToQuadrilateral(c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s);return GridSampler.sampleGrid3(a,b,t)},e.VERSION_DECODE_INFO=new Array(31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017),e.VERSIONS=f(),e.getVersionForNumber=function(a){if(1>a||a>40)throw"ArgumentException";return e.VERSIONS[a-1]},e.getProvisionalVersionForDimension=function(a){if(a%4!=1)throw"Error getProvisionalVersionForDimension";try{return e.getVersionForNumber(a-17>>2)}catch(b){throw"Error getVersionForNumber"}},e.decodeVersionInformation=function(a){for(var b=4294967295,c=0,d=0;d<e.VERSION_DECODE_INFO.length;d++){var f=e.VERSION_DECODE_INFO[d];if(f==a)return this.getVersionForNumber(d+7);var g=j.numBitsDiffering(a,f);b>g&&(c=d+7,b=g)}return 3>=b?this.getVersionForNumber(c):null},g.quadrilateralToQuadrilateral=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.quadrilateralToSquare(a,b,c,d,e,f,g,h),r=this.squareToQuadrilateral(i,j,k,l,m,n,o,p);return r.times(q)},g.squareToQuadrilateral=function(a,b,c,d,e,f,h,i){return dy2=i-f,dy3=b-d+f-i,0==dy2&&0==dy3?new g(c-a,e-c,a,d-b,f-d,b,0,0,1):(dx1=c-e,dx2=h-e,dx3=a-c+e-h,dy1=d-f,denominator=dx1*dy2-dx2*dy1,a13=(dx3*dy2-dx2*dy3)/denominator,a23=(dx1*dy3-dx3*dy1)/denominator,new g(c-a+a13*c,h-a+a23*h,a,d-b+a13*d,i-b+a23*i,b,a13,a23,1))},g.quadrilateralToSquare=function(a,b,c,d,e,f,g,h){return this.squareToQuadrilateral(a,b,c,d,e,f,g,h).buildAdjoint()};var H=21522,I=new Array(new Array(21522,0),new Array(20773,1),new Array(24188,2),new Array(23371,3),new Array(17913,4),new Array(16590,5),new Array(20375,6),new Array(19104,7),new Array(30660,8),new Array(29427,9),new Array(32170,10),new Array(30877,11),new Array(26159,12),new Array(25368,13),new Array(27713,14),new Array(26998,15),new Array(5769,16),new Array(5054,17),new Array(7399,18),new Array(6608,19),new Array(1890,20),new Array(597,21),new Array(3340,22),new Array(2107,23),new Array(13663,24),new Array(12392,25),new Array(16177,26),new Array(14854,27),new Array(9396,28),new Array(8579,29),new Array(11994,30),new Array(11245,31)),J=new Array(0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4);j.numBitsDiffering=function(a,b){return a^=b,J[15&a]+J[15&A(a,4)]+J[15&A(a,8)]+J[15&A(a,12)]+J[15&A(a,16)]+J[15&A(a,20)]+J[15&A(a,24)]+J[15&A(a,28)]},j.decodeFormatInformation=function(a){var b=j.doDecodeFormatInformation(a);return null!=b?b:j.doDecodeFormatInformation(a^H)},j.doDecodeFormatInformation=function(a){for(var b=4294967295,c=0,d=0;d<I.length;d++){var e=I[d],f=e[0];if(f==a)return new j(e[1]);var g=this.numBitsDiffering(a,f);b>g&&(c=e[1],b=g)}return 3>=b?new j(c):null},k.forBits=function(a){if(0>a||a>=O.length)throw"ArgumentException";return O[a]};var K=new k(0,1,"L"),L=new k(1,0,"M"),M=new k(2,3,"Q"),N=new k(3,2,"H"),O=new Array(L,K,N,M);m.getDataBlocks=function(a,b,c){if(a.length!=b.TotalCodewords)throw"ArgumentException";for(var d=b.getECBlocksForLevel(c),e=0,f=d.getECBlocks(),g=0;g<f.length;g++)e+=f[g].Count;for(var h=new Array(e),i=0,j=0;j<f.length;j++)for(var k=f[j],g=0;g<k.Count;g++){var l=k.DataCodewords,n=d.ECCodewordsPerBlock+l;h[i++]=new m(l,new Array(n))}for(var o=h[0].codewords.length,p=h.length-1;p>=0;){var q=h[p].codewords.length;if(q==o)break;p--}p++;for(var r=o-d.ECCodewordsPerBlock,s=0,g=0;r>g;g++)for(var j=0;i>j;j++)h[j].codewords[g]=a[s++];for(var j=p;i>j;j++)h[j].codewords[r]=a[s++];for(var t=h[0].codewords.length,g=r;t>g;g++)for(var j=0;i>j;j++){var u=p>j?g:g+1;h[j].codewords[u]=a[s++]}return h},DataMask={},DataMask.forReference=function(a){if(0>a||a>7)throw"System.ArgumentException";return DataMask.DATA_MASKS[a]},DataMask.DATA_MASKS=new Array(new o,new q,new r,new s,new t,new u,new v,new w),z.QR_CODE_FIELD=new z(285),z.DATA_MATRIX_FIELD=new z(301),z.addOrSubtract=function(a,b){return a^b},Decoder={},Decoder.rsDecoder=new x(z.QR_CODE_FIELD),Decoder.correctErrors=function(a,b){for(var c=a.length,d=new Array(c),e=0;c>e;e++)d[e]=255&a[e];var f=a.length-b;try{Decoder.rsDecoder.decode(d,f)}catch(g){throw g}for(var e=0;b>e;e++)a[e]=d[e]},Decoder.decode=function(a){for(var b=new n(a),c=b.readVersion(),d=b.readFormatInformation().ErrorCorrectionLevel,e=b.readCodewords(),f=m.getDataBlocks(e,c,d),g=0,h=0;h<f.length;h++)g+=f[h].NumDataCodewords;for(var i=new Array(g),j=0,k=0;k<f.length;k++){var l=f[k],o=l.Codewords,p=l.NumDataCodewords;Decoder.correctErrors(o,p);for(var h=0;p>h;h++)i[j++]=o[h]}var q=new G(i,c.VersionNumber,d.Bits);return q},qrcode={},qrcode.imagedata=null,qrcode.width=0,qrcode.height=0,qrcode.qrCodeSymbol=null,qrcode.debug=!1,qrcode.maxImgSize=1048576,qrcode.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],qrcode.callback=null,qrcode.decode=function(a){if(0==arguments.length){var b=document.getElementById("qr-canvas"),c=b.getContext("2d");return qrcode.width=b.width,qrcode.height=b.height,qrcode.imagedata=c.getImageData(0,0,qrcode.width,qrcode.height),qrcode.result=qrcode.process(c),null!=qrcode.callback&&qrcode.callback(qrcode.result),qrcode.result}var d=new Image;d.onload=function(){var a=document.createElement("canvas"),b=a.getContext("2d"),c=d.height,e=d.width;if(d.width*d.height>qrcode.maxImgSize){var f=d.width/d.height;c=Math.sqrt(qrcode.maxImgSize/f),e=f*c}a.width=e,a.height=c,b.drawImage(d,0,0,a.width,a.height),qrcode.width=a.width,qrcode.height=a.height;try{qrcode.imagedata=b.getImageData(0,0,a.width,a.height)}catch(g){return qrcode.result="Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!",void(null!=qrcode.callback&&qrcode.callback(qrcode.result))}try{qrcode.result=qrcode.process(b)}catch(g){console.log(g),qrcode.result="error decoding QR Code"}null!=qrcode.callback&&qrcode.callback(qrcode.result)},d.src=a},qrcode.isUrl=function(a){var b=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return b.test(a)},qrcode.decode_url=function(a){var b="";try{b=escape(a)}catch(c){console.log(c),b=a}var d="";try{d=decodeURIComponent(b)}catch(c){console.log(c),d=b}return d},qrcode.decode_utf8=function(a){return qrcode.isUrl(a)?qrcode.decode_url(a):a},qrcode.process=function(a){var b=(new Date).getTime(),c=qrcode.grayScaleToBitmap(qrcode.grayscale());if(qrcode.debug){for(var d=0;d<qrcode.height;d++)for(var e=0;e<qrcode.width;e++){var f=4*e+d*qrcode.width*4;qrcode.imagedata.data[f]=(c[e+d*qrcode.width],0),qrcode.imagedata.data[f+1]=(c[e+d*qrcode.width],0),qrcode.imagedata.data[f+2]=c[e+d*qrcode.width]?255:0}a.putImageData(qrcode.imagedata,0,0)}var g=new i(c),h=g.detect();qrcode.debug&&a.putImageData(qrcode.imagedata,0,0);for(var j=Decoder.decode(h.bits),k=j.DataByte,l="",m=0;m<k.length;m++)for(var n=0;n<k[m].length;n++)l+=String.fromCharCode(k[m][n]);var o=(new Date).getTime(),p=o-b;return console.log(p),qrcode.decode_utf8(l)},qrcode.getPixel=function(a,b){if(qrcode.width<a)throw"point error";if(qrcode.height<b)throw"point error";return point=4*a+b*qrcode.width*4,p=(33*qrcode.imagedata.data[point]+34*qrcode.imagedata.data[point+1]+33*qrcode.imagedata.data[point+2])/100,p},qrcode.binarize=function(a){for(var b=new Array(qrcode.width*qrcode.height),c=0;c<qrcode.height;c++)for(var d=0;d<qrcode.width;d++){var e=qrcode.getPixel(d,c);b[d+c*qrcode.width]=a>=e?!0:!1}return b},qrcode.getMiddleBrightnessPerArea=function(a){for(var b=4,c=Math.floor(qrcode.width/b),d=Math.floor(qrcode.height/b),e=new Array(b),f=0;b>f;f++){e[f]=new Array(b);for(var g=0;b>g;g++)e[f][g]=new Array(0,0)}for(var h=0;b>h;h++)for(var i=0;b>i;i++){e[i][h][0]=255;for(var j=0;d>j;j++)for(var k=0;c>k;k++){var l=a[c*i+k+(d*h+j)*qrcode.width];l<e[i][h][0]&&(e[i][h][0]=l),l>e[i][h][1]&&(e[i][h][1]=l)}}for(var m=new Array(b),n=0;b>n;n++)m[n]=new Array(b);for(var h=0;b>h;h++)for(var i=0;b>i;i++)m[i][h]=Math.floor((e[i][h][0]+e[i][h][1])/2);return m},qrcode.grayScaleToBitmap=function(a){for(var b=qrcode.getMiddleBrightnessPerArea(a),c=b.length,d=Math.floor(qrcode.width/c),e=Math.floor(qrcode.height/c),f=new Array(qrcode.height*qrcode.width),g=0;c>g;g++)for(var h=0;c>h;h++)for(var i=0;e>i;i++)for(var j=0;d>j;j++)f[d*h+j+(e*g+i)*qrcode.width]=a[d*h+j+(e*g+i)*qrcode.width]<b[h][g]?!0:!1;return f},qrcode.grayscale=function(){for(var a=new Array(qrcode.width*qrcode.height),b=0;b<qrcode.height;b++)for(var c=0;c<qrcode.width;c++){var d=qrcode.getPixel(c,b);a[c+b*qrcode.width]=d}return a},Array.prototype.remove=function(a,b){var c=this.slice((b||a)+1||this.length);return this.length=0>a?this.length+a:a,this.push.apply(this,c)};var P=3,Q=57,R=8,S=2;qrcode.orderBestPatterns=function(a){function b(a,b){return xDiff=a.X-b.X,yDiff=a.Y-b.Y,Math.sqrt(xDiff*xDiff+yDiff*yDiff)}function c(a,b,c){var d=b.x,e=b.y;return(c.x-d)*(a.y-e)-(c.y-e)*(a.x-d)}var d,e,f,g=b(a[0],a[1]),h=b(a[1],a[2]),i=b(a[0],a[2]);if(h>=g&&h>=i?(e=a[0],d=a[1],f=a[2]):i>=h&&i>=g?(e=a[1],d=a[0],f=a[2]):(e=a[2],d=a[0],f=a[1]),c(d,e,f)<0){var j=d;d=f,f=j}a[0]=d,a[1]=e,a[2]=f};var T=function(){function a(){if(!U&&document.getElementsByTagName("body")[0]){try{var a,b=r("span");b.style.display="none",a=M.getElementsByTagName("body")[0].appendChild(b),a.parentNode.removeChild(a),a=null,b=null}catch(c){return}U=!0;for(var d=P.length,e=0;d>e;e++)P[e]()}}function b(a){U?a():P[P.length]=a}function c(a){if(typeof L.addEventListener!=E)L.addEventListener("load",a,!1);else if(typeof M.addEventListener!=E)M.addEventListener("load",a,!1);else if(typeof L.attachEvent!=E)t(L,"onload",a);else if("function"==typeof L.onload){var b=L.onload;L.onload=function(){b(),a()}}else L.onload=a}function d(){var a=M.getElementsByTagName("body")[0],b=r(F);b.setAttribute("style","visibility: hidden;"),b.setAttribute("type",I);var c=a.appendChild(b);if(c){var d=0;!function f(){if(typeof c.GetVariable!=E)try{var g=c.GetVariable("$version");g&&(g=g.split(" ")[1].split(","),Y.pv=[s(g[0]),s(g[1]),s(g[2])])}catch(h){Y.pv=[8,0,0]}else if(10>d)return d++,void setTimeout(f,10);a.removeChild(b),c=null,e()}()}else e()}function e(){var a=Q.length;if(a>0)for(var b=0;a>b;b++){var c=Q[b].id,d=Q[b].callbackFn,e={success:!1,id:c};if(Y.pv[0]>0){var j=q(c);if(j)if(!u(Q[b].swfVersion)||Y.wk&&Y.wk<312)if(Q[b].expressInstall&&g()){var k={};k.data=Q[b].expressInstall,k.width=j.getAttribute("width")||"0",k.height=j.getAttribute("height")||"0",j.getAttribute("class")&&(k.styleclass=j.getAttribute("class")),j.getAttribute("align")&&(k.align=j.getAttribute("align"));for(var l={},m=j.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));h(k,l,c,d)}else i(j),d&&d(e);else w(c,!0),d&&(e.success=!0,e.ref=f(c),e.id=c,d(e))}else if(w(c,!0),d){var p=f(c);p&&typeof p.SetVariable!=E&&(e.success=!0,e.ref=p,e.id=p.id),d(e)}}}function f(a){var b=null,c=q(a);return c&&"OBJECT"===c.nodeName.toUpperCase()&&(b=typeof c.SetVariable!==E?c:c.getElementsByTagName(F)[0]||c),b}function g(){return!V&&u("6.0.65")&&(Y.win||Y.mac)&&!(Y.wk&&Y.wk<312)}function h(a,b,c,d){var e=q(c);if(c=p(c),V=!0,A=d||null,B={success:!1,id:c},e){"OBJECT"==e.nodeName.toUpperCase()?(y=j(e),z=null):(y=e,z=c),a.id=J,(typeof a.width==E||!/%$/.test(a.width)&&s(a.width)<310)&&(a.width="310"),(typeof a.height==E||!/%$/.test(a.height)&&s(a.height)<137)&&(a.height="137");var f=Y.ie?"ActiveX":"PlugIn",g="MMredirectURL="+encodeURIComponent(L.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+f+"&MMdoctitle="+encodeURIComponent(M.title.slice(0,47)+" - Flash Player Installation");if(typeof b.flashvars!=E?b.flashvars+="&"+g:b.flashvars=g,Y.ie&&4!=e.readyState){var h=r("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",n(e)}l(a,b,c)}}function i(a){if(Y.ie&&4!=a.readyState){a.style.display="none";var b=r("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(j(a),b),n(a)}else a.parentNode.replaceChild(j(a),a)}function j(a){var b=r("div");if(Y.win&&Y.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(F)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function k(a,b){var c=r("div");return c.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+a+"'>"+b+"</object>",c.firstChild}function l(a,b,c){var d,e=q(c);if(c=p(c),Y.wk&&Y.wk<312)return d;if(e){var f,g,h,i=r(Y.ie?"div":F);typeof a.id==E&&(a.id=c);for(h in b)b.hasOwnProperty(h)&&"movie"!==h.toLowerCase()&&m(i,h,b[h]);Y.ie&&(i=k(a.data,i.innerHTML));for(f in a)a.hasOwnProperty(f)&&(g=f.toLowerCase(),"styleclass"===g?i.setAttribute("class",a[f]):"classid"!==g&&"data"!==g&&i.setAttribute(f,a[f]));Y.ie?R[R.length]=a.id:(i.setAttribute("type",I),i.setAttribute("data",a.data)),e.parentNode.replaceChild(i,e),d=i}return d}function m(a,b,c){var d=r("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a){var b=q(a);b&&"OBJECT"==b.nodeName.toUpperCase()&&(Y.ie?(b.style.display="none",function c(){if(4==b.readyState){for(var a in b)"function"==typeof b[a]&&(b[a]=null);b.parentNode.removeChild(b)}else setTimeout(c,10)}()):b.parentNode.removeChild(b))}function o(a){return a&&a.nodeType&&1===a.nodeType}function p(a){return o(a)?a.id:a}function q(a){if(o(a))return a;var b=null;try{b=M.getElementById(a)}catch(c){}return b}function r(a){return M.createElement(a)}function s(a){return parseInt(a,10)}function t(a,b,c){a.attachEvent(b,c),S[S.length]=[a,b,c]}function u(a){a+="";var b=Y.pv,c=a.split(".");return c[0]=s(c[0]),c[1]=s(c[1])||0,c[2]=s(c[2])||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function v(a,b,c,d){var e=M.getElementsByTagName("head")[0];if(e){var f="string"==typeof c?c:"screen";if(d&&(C=null,D=null),!C||D!=f){var g=r("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),C=e.appendChild(g),Y.ie&&typeof M.styleSheets!=E&&M.styleSheets.length>0&&(C=M.styleSheets[M.styleSheets.length-1]),D=f}C&&(typeof C.addRule!=E?C.addRule(a,b):typeof M.createTextNode!=E&&C.appendChild(M.createTextNode(a+" {"+b+"}")))}}function w(a,b){if(W){var c=b?"visible":"hidden",d=q(a);U&&d?d.style.visibility=c:"string"==typeof a&&v("#"+a,"visibility:"+c)}}function x(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=E?encodeURIComponent(a):a}var y,z,A,B,C,D,E="undefined",F="object",G="Shockwave Flash",H="ShockwaveFlash.ShockwaveFlash",I="application/x-shockwave-flash",J="SWFObjectExprInst",K="onreadystatechange",L=window,M=document,N=navigator,O=!1,P=[],Q=[],R=[],S=[],U=!1,V=!1,W=!0,X=!1,Y=function(){var a=typeof M.getElementById!=E&&typeof M.getElementsByTagName!=E&&typeof M.createElement!=E,b=N.userAgent.toLowerCase(),c=N.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),e=c?/mac/.test(c):/mac/.test(b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g="Microsoft Internet Explorer"===N.appName,h=[0,0,0],i=null;if(typeof N.plugins!=E&&typeof N.plugins[G]==F)i=N.plugins[G].description,i&&typeof N.mimeTypes!=E&&N.mimeTypes[I]&&N.mimeTypes[I].enabledPlugin&&(O=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=s(i.replace(/^(.*)\..*$/,"$1")),h[1]=s(i.replace(/^.*\.(.*)\s.*$/,"$1")),h[2]=/[a-zA-Z]/.test(i)?s(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof L.ActiveXObject!=E)try{var j=new ActiveXObject(H);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[s(i[0]),s(i[1]),s(i[2])]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();(function(){Y.w3&&((typeof M.readyState!=E&&("complete"===M.readyState||"interactive"===M.readyState)||typeof M.readyState==E&&(M.getElementsByTagName("body")[0]||M.body))&&a(),U||(typeof M.addEventListener!=E&&M.addEventListener("DOMContentLoaded",a,!1),Y.ie&&(M.attachEvent(K,function b(){"complete"==M.readyState&&(M.detachEvent(K,b),a())}),L==top&&!function c(){if(!U){try{M.documentElement.doScroll("left")}catch(b){return void setTimeout(c,0)}a()}}()),Y.wk&&!function d(){return U?void 0:/loaded|complete/.test(M.readyState)?void a():void setTimeout(d,0)}()))})();P[0]=function(){O?d():e()};(function(){Y.ie&&window.attachEvent("onunload",function(){for(var a=S.length,b=0;a>b;b++)S[b][0].detachEvent(S[b][1],S[b][2]);for(var c=R.length,d=0;c>d;d++)n(R[d]);for(var e in Y)Y[e]=null;Y=null;for(var f in T)T[f]=null;T=null})})();return{registerObject:function(a,b,c,d){if(Y.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,Q[Q.length]=e,w(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return Y.w3?f(a):void 0},embedSWF:function(a,c,d,e,f,i,j,k,m,n){var o=p(c),q={success:!1,id:o};Y.w3&&!(Y.wk&&Y.wk<312)&&a&&c&&d&&e&&f?(w(o,!1),b(function(){d+="",e+="";var b={};if(m&&typeof m===F)for(var p in m)b[p]=m[p];b.data=a,b.width=d,b.height=e;var r={};if(k&&typeof k===F)for(var s in k)r[s]=k[s];if(j&&typeof j===F)for(var t in j)if(j.hasOwnProperty(t)){var v=X?encodeURIComponent(t):t,x=X?encodeURIComponent(j[t]):j[t];typeof r.flashvars!=E?r.flashvars+="&"+v+"="+x:r.flashvars=v+"="+x}if(u(f)){var y=l(b,r,c);b.id==o&&w(o,!0),q.success=!0,q.ref=y,q.id=y.id}else{if(i&&g())return b.data=i,void h(b,r,c,n);w(o,!0)}n&&n(q)})):n&&n(q)},switchOffAutoHideShow:function(){W=!1},enableUriEncoding:function(a){X=typeof a===E?!0:a},ua:Y,getFlashPlayerVersion:function(){return{major:Y.pv[0],minor:Y.pv[1],release:Y.pv[2]}},hasFlashPlayerVersion:u,createSWF:function(a,b,c){return Y.w3?l(a,b,c):void 0},showExpressInstall:function(a,b,c,d){Y.w3&&g()&&h(a,b,c,d)},removeSWF:function(a){Y.w3&&n(a)},createCSS:function(a,b,c,d){Y.w3&&v(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=M.location.search||M.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return x(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return x(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(V){var a=q(J);a&&y&&(a.parentNode.replaceChild(y,a),z&&(w(z,!0),Y.ie&&(y.style.display="block")),A&&A(B)),V=!1}},version:"2.3"}}(),U=function(){function a(){}return a.toArray=function(a,b){void 0===b&&(b=!1);var c=0;return Object.keys(a).filter(function(a){var b=c%2===0;return c++,b})},a.first=function(a,b){return a.find(b)[0]||null},a.getDefault=function(a){return a[0]?a[0]:null},a.firstOrDefault=function(a,b){return a.first(b)||a.getDefault()},a.filter=function(a,b){var c=new Array;if(!b)return c;for(var d=0,e=b.length;e>d;d++)a(b[d],d,b)&&c.push(b[d]);return c},a.find=function(a,b){var c=new Array;if(!b)return c;for(var d=0,e=b.length;e>d;d++)if(a(b[d],d,b))return c.push(b[d]),c;return c},a.map=function(a,b){var c=new Array;if(!b)return c;for(var d=b.length,e=0;d>e;)c.push(a(b[e],e,b)),e++;return c},a}();Array.prototype.first=function(a){return U.first(this,a)},Array.prototype.firstOrDefault=function(a){return U.firstOrDefault(this,a)},Array.prototype.getDefault=function(){return U.getDefault(this)},Array.prototype.filter=function(a){return U.filter(a,this)},Array.prototype.find=function(a){return U.find(a,this)},Array.prototype.map=function(a){return U.map(a,this)},String.prototype.empty=new String,String.prototype.type=typeof String.empty;var V,W=function(){function a(){}return a.prototype.nextFallback=function(){},a.prototype.declinedFallback=function(){},a.flashDeclined=function(){this.currentFlashImageProcessor.declinedFallback()},a.cameraNotSupported=function(){this.currentFlashImageProcessor.nextFallback()},a.renderVideo=function(a){qrcode.decode(a)},a.prototype.initiate=function(){return 0===T.getFlashPlayerVersion().major?void this.nextFallback():(a.currentFlashImageProcessor=this,this.buildHtml(),this.initializeFlash(),void(qrcode.callback=this.qrCallback.bind(this)))},a.prototype.buildHtml=function(){var a={deniedMethod:"FlashImageProcessor.flashDeclined",exportDataMethod:"FlashImageProcessor.renderVideo",notSupportedMethod:"FlashImageProcessor.cameraNotSupported"},b={scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always",bgcolor:"#000",movie:"Content/HaxeCam.swf",quality:"high"},c={id:"flashVideo",wmode:"transparent"};T.embedSWF(b.movie,document.querySelector("#appBody"),"100%","100%",20,null,a,b,c),this.flashVideo=document.querySelector("object")},a.prototype.initializeFlash=function(){var a=this;this.flashVideo.onload=function(){a.flashVideo.focus(),a.flashVideo.click()},window.onfocus=document.onfocus=document.querySelector("body").onfocus=function(){a.flashVideo.focus(),a.flashVideo.click()},this.flashVideo.style.visibility="visible"},a.prototype.qrCallback=function(a){ca.current.qrCallback(a,function(a){})},a}(),X=function(){function a(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia}return a.prototype.nextFallback=function(){},a.prototype.declinedFallback=function(){},a.prototype.hasGetUserMedia=function(){return!!navigator.getUserMedia},a.prototype.initiate=function(){return this.hasGetUserMedia()?(this.buildHtml(),this.initializeVideo(),void(qrcode.callback=this.qrCallback.bind(this))):void this.nextFallback()},a.prototype.buildHtml=function(){this.video=document.createElement("video"),this.video.id="mainVideo",this.video.muted=!0,this.video.autoplay=!1,this.video.loop=!0,document.body.appendChild(this.video)},a.prototype.initializeVideo=function(){var a=this,b=null,c=!1,d=document.createElement("canvas"),e=function(){if(!c)return window.clearInterval(b),b=null,void a.declinedFallback();console.log("video parse");var e=d.getContext("2d");e.drawImage(a.video,0,0,d.width,d.height);var f=d.toDataURL();qrcode.decode(f)};navigator.getUserMedia({audio:!1,video:!0},function(d){c=!0,a.video.src=window.URL.createObjectURL(d),a.video.play(),b=window.setInterval(e,200)},function(d){a.video.style.display="none",c=!1,null!=b&&(window.clearInterval(b),b=null),a.declinedFallback()}),this.video.style.display="block"},a.prototype.qrCallback=function(a){ca.current.qrCallback(a,function(a){})},a}(),Y=function(){function a(a){this.defaultImageProcessor=a,this.imageProcessors=new Array}return a.prototype.addImageProcessor=function(a){return this.imageProcessors.push(a),this},a.prototype.initiate=function(){for(var a=0;a<this.imageProcessors.length;a++){var b=this.imageProcessors[a],c=this.imageProcessors[a+1]||null;b.nextFallback=null!=c?c.initiate.bind(c):this.defaultImageProcessor.initiate.bind(this.defaultImageProcessor),b.declinedFallback=this.defaultImageProcessor.initiate.bind(this.defaultImageProcessor)}return this.imageProcessors[0].initiate(),this},a}(),Z=function(){function a(){}return a.prototype.nextFallback=function(){},a.prototype.declinedFallback=function(){},a.prototype.initiate=function(){this.buildHtml(),this.initializeUpload(),qrcode.callback=this.qrCallback.bind(this)},a.prototype.buildHtml=function(){this.form=document.createElement("form"),this.form.id="mainForm",this.form.action=String(),this.form.method="POST",this.form.enctype="multipart/form-data";var a=document.createElement("label"),b=document.createElement("div");b.setAttribute("class","label"),b.innerHTML='Tap to select<wbr/> <span class="no-break">QR-Code</span>',this.errorField=document.createElement("div"),this.errorField.setAttribute("class","error"),this.cameraInput=document.createElement("input"),this.cameraInput.type="file",this.cameraInput.name="file",this.cameraInput.accept="image/*;capture=camera",this.cameraInput.setAttribute("capture","camera"),a.appendChild(b),a.appendChild(this.errorField),a.appendChild(this.cameraInput),this.form.appendChild(a),document.body.appendChild(this.form)},a.prototype.initializeUpload=function(){var a=this;this.cameraInput.onfocus=function(a){return document.body.focus()},this.form.onsubmit=function(a){return a.cancelBubble=!0,a.preventDefault(),a},this.cameraInput.onclick=function(b){return a.clearErrors()},this.cameraInput.onchange=function(b){return a.clearErrors(),ca.current.setTitle("Reading..."),b.cancelBubble=!0,b.preventDefault(),a.cameraInput.value?(a.readQR(),b):(a.reset(),b)}},a.prototype.readQR=function(){var a=this.cameraInput.files[0];if(a){var b=new FileReader;b.onloadend=function(){ca.current.setTitle("Parsing..."),console.log("Created DataUrl: "+b.result),qrcode.decode(b.result)},b.readAsDataURL(a)}},a.prototype.reset=function(){this.cameraInput.value=null,ca.current.reset()},a.prototype.clearErrors=function(){this.errorField.innerText=String()},a.prototype.setError=function(a){this.errorField.innerText=a},a.prototype.qrCallback=function(a){var b=this;ca.current.qrCallback(a,function(a){return b.setError(a)})},a}(),$=function(){function a(){this.dataProcessors=new Array}return a.prototype.addDataProcessor=function(a){var b=V[a.dataType];return this.dataProcessors.push({key:b,dataProcessor:a}),this},a.prototype.calculate=function(a){if(a=a.trim(),console.log("Raw QR-Data: "+a),"error decoding QR Code"===a)throw new TypeError(a);var b=U.toArray(V).firstOrDefault(function(b){return null!==V[b]&&V[b].test?V[b].test(a):!1}),c=this.dataProcessors.first(function(a){return a.key===b});if(!c)throw new ReferenceError("The processor for this dataType is missing!");var d=c.dataProcessor;d.errorCallback=function(a){alert(a)},d.initiate(a)},a}();!function(a){a[a.Text=null]="Text",a[a.Url=/^(\s)*(https?:\/\/)([a-zA-Z0-9\_\-\.\/\?\=\&\#\:\[\]\{\}]+[a-zA-Z0-9\?\&\#\/\]\}?])(\s)*$/i]="Url",a[a.VCard=/(BEGIN:VCARD(\s*)){1}(\w*\W*\s*?)*((\s*?)END:VCARD){1}/im]="VCard",a[a.SMS=new RegExp("^todo$","gi")]="SMS",a[a.Call=new RegExp("^todo$","gi")]="Call",a[a.GeoLocation=new RegExp("^todo$","gi")]="GeoLocation",a[a.Event=new RegExp("^todo$","gi")]="Event",a[a.Email=new RegExp("^todo$","gi")]="Email",a[a.WifiData=new RegExp("^todo$","gi")]="WifiData"}(V||(V={}));var _=function(){function a(){this.dataType=V.Text}return a.prototype.initiate=function(a){alert("Text value: \n"+a)},a}(),aa=function(){function a(){this.dataType=V.Url}return a.prototype.initiate=function(a){var b=window.confirm("Are you sure you want to navigate to '"+a+"'?");b?window.location.href=a:this.afterSuccessCallback(function(){})},a}(),ba=function(){function a(){this.dataType=V.VCard,this.labelMapping={FN:"Full name","TEL;CELL":"Phone(mobile)","TEL;HOME":"Phone(personal)","TEL;WORK":"Phone(business)","EMAIL;HOME":"Email(personal)","EMAIL;WORK":"Email(business)",ADR:"Address",Address:"Organisation"}}return a.prototype.initiate=function(a){var b=this,c={};a.replace(/^(BEGIN:VCARD(\s*)*VERSION:[0-9].[0-9]+(\s*)*)/im,"").replace(/((\s*?)END:VCARD)/gim,"").trim().split(/\n\r?/gim).map(function(a){return a.split(":")}).forEach(function(a){var d=U.toArray(b.labelMapping).first(function(b){return-1!==a[0].indexOf(b)});if(d){var e=b.labelMapping[d.replace('"',"").trim()];if(e&&-1===e.indexOf("ADR")&&(c[e]=a[1].replace(/;/g," ").trim()),e&&-1!==d.indexOf("ADR")){var f=a[1].split(";");c[e]=f[3].trim()+",\n"+(f[4].trim()+" "+f[5].trim()).trim()+",\n"+f[6].trim()}}});var d=confirm("vCard: \n$download?");if(d){var e=document.createElement("a");e.href="data:attachment/text,"+encodeURI(a),e.target="_blank",e.setAttribute("download",c["Full name"]+" ("+(new Date).toISOString().slice(0,10)+").vcf"),e.click()}},a}(),ca=function(){function a(){this.setTitle("Loading..."),a.current=this,this.imageProcessorFactory=new Y(new Z).addImageProcessor(new X).addImageProcessor(new W).initiate(),this.dataProcessorFactory=(new $).addDataProcessor(new _).addDataProcessor(new aa).addDataProcessor(new ba),
this.initialize()}return a.prototype.initialize=function(){this.reset()},a.prototype.setTitle=function(a){document.title="QR-Reader - "+a},a.prototype.reset=function(){this.setTitle("Select QR-Code")},a.prototype.qrCallback=function(a,b){try{this.dataProcessorFactory.calculate(a)}catch(c){b(c.message)}},a}();window.onload=function(){return new ca},b["true"]=a}({},function(){return this}());